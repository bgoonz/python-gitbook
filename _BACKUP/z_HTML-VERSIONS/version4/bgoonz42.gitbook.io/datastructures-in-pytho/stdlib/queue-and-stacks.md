<a href="https://bgoonz42.gitbook.io/datastructures-in-pytho/" class="link-a079aa82--primary-53a25e66--logoLink-10d08504"></a>

<img src="https://gblobscdn.gitbook.com/spaces%2F-Mij72ebV4OjqJvBacMy%2Favatar-rectangle-1631155247747.png?alt=media" class="image-67b14f24--logo-35ac2404--small-5fbe8ad7" />

<a href="https://bgoonz42.gitbook.io/datastructures-in-pytho/" class="link-a079aa82--primary-53a25e66--logoLink-10d08504"></a>

<img src="https://gblobscdn.gitbook.com/spaces%2F-Mij72ebV4OjqJvBacMy%2Favatar-rectangle-1631155247747.png?alt=media" class="image-67b14f24--logo-35ac2404--medium-5fbe8af6" />

<a href="https://bgoonz-blog.netlify.app/#gsc.tab=0" class="button-36063075--medium-6e2a217a--button-f76f0854--linkButton-67c61496--links-282dde1f"><span class="text-4505230f--UIH400-4e41e82a--textContentFamily-49a318e1--text-8ee2c8b2"><span class="text-4505230f--UIH400-4e41e82a--textContentFamily-49a318e1">My Blog</span></span></a>

<a href="https://www.notion.so/webdevhub42/Python-Data-Structures-Unit-1da9a5d55db844f4b62aff6fd2b4d1ce" class="button-36063075--medium-6e2a217a--button-f76f0854--linkButton-67c61496--links-282dde1f"><span class="text-4505230f--UIH400-4e41e82a--textContentFamily-49a318e1--text-8ee2c8b2"><span class="text-4505230f--UIH400-4e41e82a--textContentFamily-49a318e1">Notion Notes</span></span></a>

<a href="https://bgoonz-branch-the-algos.vercel.app/" class="button-36063075--medium-6e2a217a--button-f76f0854--linkButton-67c61496--links-282dde1f"><span class="text-4505230f--UIH400-4e41e82a--textContentFamily-49a318e1--text-8ee2c8b2"><span class="text-4505230f--UIH400-4e41e82a--textContentFamily-49a318e1">The Algorithms</span></span></a>

<a href="https://thealgorithms.netlify.app/#" class="button-36063075--medium-6e2a217a--button-f76f0854--linkButton-67c61496--links-282dde1f"><span class="text-4505230f--UIH400-4e41e82a--textContentFamily-49a318e1--text-8ee2c8b2"><span class="text-4505230f--UIH400-4e41e82a--textContentFamily-49a318e1">Python Module Website</span></span></a>

<a href="https://bgoonz42.gitbook.io/datastructures-in-pytho/" class="navButton-94f2579c--navButtonClickable-161b88ca"><span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Home</span></a>

<a href="../index.html" class="navButton-94f2579c--navButtonClickable-161b88ca"><span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Downloads &amp; Misc-Assets</span></a>

<a href="../readme-1.html" class="navButton-94f2579c--navButtonClickable-161b88ca"><span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">README</span></a>

<a href="../navigation.html" class="navButton-94f2579c--navButtonClickable-161b88ca"><span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Navigation</span></a>

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f"><span class="text-4505230f--InfoH200-3a8a7a86--textContentFamily-49a318e1">Cirriculumn</span></span>

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Outline</span>

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">wk17</span>

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">wk18</span>

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">wk19</span>

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">wk20</span>

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f"><span class="text-4505230f--InfoH200-3a8a7a86--textContentFamily-49a318e1">Abstract Data Structures</span></span>

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Abstract Data Structures:</span>

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f"><span class="text-4505230f--InfoH200-3a8a7a86--textContentFamily-49a318e1">Utilities</span></span>

<a href="../utilities/code-lab-notebooks.html" class="navButton-94f2579c--navButtonClickable-161b88ca"><span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Code lab Notebooks</span></a>

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Repl.IT</span>

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Utilites</span>

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f"><span class="text-4505230f--InfoH200-3a8a7a86--textContentFamily-49a318e1">practice</span></span>

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">GCA Sprint Prep:</span>

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Supplemental Practice:</span>

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f"><span class="text-4505230f--InfoH200-3a8a7a86--textContentFamily-49a318e1">Resources</span></span>

<a href="../resources/python-cheat-sheet.html" class="navButton-94f2579c--navButtonClickable-161b88ca"><span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Python Cheat Sheet</span></a>

<a href="../resources/intro-2-python.html" class="navButton-94f2579c--navButtonClickable-161b88ca"><span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Intro 2 Python</span></a>

<a href="../resources/untitled-2.html" class="navButton-94f2579c--navButtonClickable-161b88ca"><span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Inheritance</span></a>

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Strings</span>

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Dictionaries</span>

<a href="../resources/python-vs-javascript.html" class="navButton-94f2579c--navButtonClickable-161b88ca"><span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Python VS JavaScript</span></a>

<a href="../resources/untitled-1.html" class="navButton-94f2579c--navButtonClickable-161b88ca"><span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Misc. Resources</span></a>

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Things To Internalize:</span>

<a href="../resources/intro-to-python-w-jupyter-notebooks.html" class="navButton-94f2579c--navButtonClickable-161b88ca"><span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Intro To Python w Jupyter Notebooks</span></a>

<a href="../resources/calculating-big-o.html" class="navButton-94f2579c--navButtonClickable-161b88ca"><span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Calculating Big O</span></a>

<a href="../resources/awesome-python.html" class="navButton-94f2579c--navButtonClickable-161b88ca"><span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Awesome Python</span></a>

<a href="../resources/youtube.html" class="navButton-94f2579c--navButtonClickable-161b88ca"><span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Youtube</span></a>

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Useful Links</span>

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f"><span class="text-4505230f--InfoH200-3a8a7a86--textContentFamily-49a318e1">quick-reference</span></span>

<a href="../quick-reference/my-medium-articles.html" class="navButton-94f2579c--navButtonClickable-161b88ca"><span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">My Medium Articles</span></a>

<a href="../quick-reference/free-python-books.html" class="navButton-94f2579c--navButtonClickable-161b88ca"><span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Free Python Books</span></a>

<a href="../quick-reference/why-python.html" class="navButton-94f2579c--navButtonClickable-161b88ca"><span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">WHY Python?</span></a>

<a href="../quick-reference/python-snippets.html" class="navButton-94f2579c--navButtonClickable-161b88ca"><span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Python Snippets</span></a>

<a href="../quick-reference/python3-regex.html" class="navButton-94f2579c--navButtonClickable-161b88ca"><span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Python3 Regex</span></a>

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Python Module Index:</span>

<a href="../quick-reference/creating-python-modules.html" class="navButton-94f2579c--navButtonClickable-161b88ca"><span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Creating Python Modules</span></a>

<a href="../quick-reference/untitled.html" class="navButton-94f2579c--navButtonClickable-161b88ca"><span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Useful Info</span></a>

<a href="../quick-reference/python-glossary.html" class="navButton-94f2579c--navButtonClickable-161b88ca"><span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Python Glossary</span></a>

<a href="../quick-reference/untitled-1.html" class="navButton-94f2579c--navButtonClickable-161b88ca"><span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Python Snippets</span></a>

<a href="../quick-reference/bash-commands.html" class="navButton-94f2579c--navButtonClickable-161b88ca"><span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">List Of Python Cheat Sheets</span></a>

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f"><span class="text-4505230f--InfoH200-3a8a7a86--textContentFamily-49a318e1">Docs</span></span>

<a href="touple.html" class="navButton-94f2579c--navButtonClickable-161b88ca"><span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Touple</span></a>

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Docs</span>

<a href="basic-syntax.html" class="navButton-94f2579c--navButtonClickable-161b88ca"><span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Basic Syntax</span></a>

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Lists</span>

<a href="conditionals-and-loops.html" class="navButton-94f2579c--navButtonClickable-161b88ca"><span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Conditionals and loops</span></a>

<a href="dictionaries.html" class="navButton-94f2579c--navButtonClickable-161b88ca"><span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Dictionaries</span></a>

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Classes and objects</span>

<a href="untitled-1.html" class="navButton-94f2579c--navButtonClickable-161b88ca"><span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Functions</span></a>

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Built In Functions</span>

<a href="untitled-2.html" class="navButton-94f2579c--navButtonClickable-161b88ca"><span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Built-in Types</span></a>

<a href="dictionaries-sets-files-and-modules.html" class="navButton-94f2579c--navButtonClickable-161b88ca"><span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Dictionaries, sets, files, and modules</span></a>

<a href="queue-and-stacks.html" class="navButton-94f2579c--navButtonClickable-161b88ca--navButtonOpened-6a88552e"><span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Queue &amp; Stacks</span></a>

<a href="values-expressions-and-statments.html" class="navButton-94f2579c--navButtonClickable-161b88ca"><span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Values Expressions &amp; Statments</span></a>

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f"><span class="text-4505230f--InfoH200-3a8a7a86--textContentFamily-49a318e1">MISC</span></span>

<a href="../misc/built-in-methods-and-functions.html" class="navButton-94f2579c--navButtonClickable-161b88ca"><span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Built-in Methods &amp; Functions</span></a>

<a href="../misc/math.html" class="navButton-94f2579c--navButtonClickable-161b88ca"><span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Math</span></a>

<a href="../misc/unsorted-examples.html" class="navButton-94f2579c--navButtonClickable-161b88ca"><span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Unsorted Examples</span></a>

<a href="../misc/outline.html" class="navButton-94f2579c--navButtonClickable-161b88ca"><span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Outline</span></a>

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">About Python</span>

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f"><span class="text-4505230f--InfoH200-3a8a7a86--textContentFamily-49a318e1">Interview Prep</span></span>

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Interview Resources</span>

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f"><span class="text-4505230f--InfoH200-3a8a7a86--textContentFamily-49a318e1">Installations Setup & Env</span></span>

<a href="../installations-setup-and-env/untitled.html" class="navButton-94f2579c--navButtonClickable-161b88ca"><span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">python-setup</span></a>

<a href="../installations-setup-and-env/installing-python-modules.html" class="navButton-94f2579c--navButtonClickable-161b88ca"><span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Installing Python Modules</span></a>

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f"><span class="text-4505230f--InfoH200-3a8a7a86--textContentFamily-49a318e1">Aux-Exploration</span></span>

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1--navButtonLabel-14a4968f">Subject</span>

<a href="https://www.gitbook.com/?utm_source=content&amp;utm_medium=trademark&amp;utm_campaign=bgoonz42" class="reset-3c756112--trademark-a8da4b94"></a>

<span class="text-4505230f--TextH200-a3425406--textUIFamily-5ebd8e40">Powered by **GitBook**</span>

<span class="text-4505230f--DisplayH900-bfb998fa--textContentFamily-49a318e1">Queue & Stacks</span>
===================================================================================================

<span class="text-4505230f--UIH300-2063425d--textUIFamily-5ebd8e40--text-8ee2c8b2"></span>

<span class="text-4505230f--UIH300-2063425d--textUIFamily-5ebd8e40--text-8ee2c8b2"></span>

<span class="text-4505230f--UIH300-2063425d--textUIFamily-5ebd8e40--text-8ee2c8b2"></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1">queues and stacks</span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="7dc9cbac244b4828bbb21bfbac7dbf54"><span data-offset-key="7dc9cbac244b4828bbb21bfbac7dbf54:0">If you often work with lists in Python, then you probably know that they don’t perform fast enough when you need to </span><span data-offset-key="7dc9cbac244b4828bbb21bfbac7dbf54:1">**pop**</span><span data-offset-key="7dc9cbac244b4828bbb21bfbac7dbf54:2"> and </span><span data-offset-key="7dc9cbac244b4828bbb21bfbac7dbf54:3">**append**</span><span data-offset-key="7dc9cbac244b4828bbb21bfbac7dbf54:4"> items on their left end. Python’s </span></span><a href="https://docs.python.org/3/library/collections.html#module-collections" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="d607ca27a17f4475b162db7af6a4dcda"><span data-offset-key="d607ca27a17f4475b162db7af6a4dcda:0"><code class="code-0458e21e" spellcheck="false" data-slate-leaf="true">collections</code></span></span></a><span data-key="29240c9fa5724b9d8302575903515702"><span data-offset-key="29240c9fa5724b9d8302575903515702:0"> module provides a class called </span></span><a href="https://docs.python.org/3/library/collections.html#collections.deque" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="26118896c22d44fab57b625cf0877395"><span data-offset-key="26118896c22d44fab57b625cf0877395:0"><code class="code-0458e21e" spellcheck="false" data-slate-leaf="true">deque</code></span></span></a><span data-key="274b16b355744a3db3b3c4d7f4c23ab8"><span data-offset-key="274b16b355744a3db3b3c4d7f4c23ab8:0"> that’s specially designed to provide fast and memory-efficient ways to append and pop item from both ends of the underlying data structure.</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="474cb07f9b06441bb343e5fb47741e09"><span data-offset-key="474cb07f9b06441bb343e5fb47741e09:0">Python’s </span><span data-offset-key="474cb07f9b06441bb343e5fb47741e09:1">`deque`</span><span data-offset-key="474cb07f9b06441bb343e5fb47741e09:2"> is a low-level and highly optimized </span></span><a href="https://en.wikipedia.org/wiki/Double-ended_queue" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="fa050212e45343ae8364772812a90aff"><span data-offset-key="fa050212e45343ae8364772812a90aff:0">double-ended queue</span></span></a><span data-key="33b028a3ffc745e0bd5cdab3751e7bdd"><span data-offset-key="33b028a3ffc745e0bd5cdab3751e7bdd:0"> that’s useful for implementing elegant, efficient, and Pythonic queues and stacks, which are the most common list-like data types in computing.</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="cec284d88cb74d98a2f8b07666c5e00f"><span data-offset-key="cec284d88cb74d98a2f8b07666c5e00f:0">**In this tutorial, you’ll learn:**</span></span></span>

-   <span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="8a8d8709141e4b6ab3881556b9119747"><span data-offset-key="8a8d8709141e4b6ab3881556b9119747:0">How to create and use Python’s </span><span data-offset-key="8a8d8709141e4b6ab3881556b9119747:1">`deque`</span><span data-offset-key="8a8d8709141e4b6ab3881556b9119747:2"> in your code</span></span></span>

-   <span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="f2bb2020c1ca49d69ebba2e257b35563"><span data-offset-key="f2bb2020c1ca49d69ebba2e257b35563:0">How to efficiently </span><span data-offset-key="f2bb2020c1ca49d69ebba2e257b35563:1">**append**</span><span data-offset-key="f2bb2020c1ca49d69ebba2e257b35563:2"> and </span><span data-offset-key="f2bb2020c1ca49d69ebba2e257b35563:3">**pop**</span><span data-offset-key="f2bb2020c1ca49d69ebba2e257b35563:4"> items from both ends of a </span><span data-offset-key="f2bb2020c1ca49d69ebba2e257b35563:5">`deque`</span></span></span>

-   <span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="33e7d8d3e53a49c3b32682014d9fec23"><span data-offset-key="33e7d8d3e53a49c3b32682014d9fec23:0">How to use </span><span data-offset-key="33e7d8d3e53a49c3b32682014d9fec23:1">`deque`</span><span data-offset-key="33e7d8d3e53a49c3b32682014d9fec23:2"> to build efficient </span><span data-offset-key="33e7d8d3e53a49c3b32682014d9fec23:3">**queues**</span><span data-offset-key="33e7d8d3e53a49c3b32682014d9fec23:4"> and </span><span data-offset-key="33e7d8d3e53a49c3b32682014d9fec23:5">**stacks**</span></span></span>

-   <span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="08188758af3241308577db10c9b54723"><span data-offset-key="08188758af3241308577db10c9b54723:0">When it’s worth using </span><span data-offset-key="08188758af3241308577db10c9b54723:1">`deque`</span><span data-offset-key="08188758af3241308577db10c9b54723:2"> instead of </span><span data-offset-key="08188758af3241308577db10c9b54723:3">`list`</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="6828d3f57abd48b286077534cf3884af"><span data-offset-key="6828d3f57abd48b286077534cf3884af:0">To better understand these topics, you should know the basics of working with Python </span></span><a href="https://realpython.com/python-lists-tuples/" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="b6ce6fb4b3134dc3a994b3d8e9dfe088"><span data-offset-key="b6ce6fb4b3134dc3a994b3d8e9dfe088:0">lists</span></span></a><span data-key="7d501f79d6f045cc98dfe6a6c7045feb"><span data-offset-key="7d501f79d6f045cc98dfe6a6c7045feb:0">. It’ll also be beneficial for you to have a general understanding of </span></span><a href="https://realpython.com/python-data-structures/#queues-fifos" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="cf56d89abf4144c3af251b30d313fd8d"><span data-offset-key="cf56d89abf4144c3af251b30d313fd8d:0">queues</span></span></a><span data-key="73599e84a69343da8288a0659bf213cd"><span data-offset-key="73599e84a69343da8288a0659bf213cd:0"> and </span></span><a href="https://realpython.com/how-to-implement-python-stack/" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="32340e55e7944d23a42e6dafdb0b3208"><span data-offset-key="32340e55e7944d23a42e6dafdb0b3208:0">stacks</span></span></a><span data-key="e8208022a4e04919a31830100b679904"><span data-offset-key="e8208022a4e04919a31830100b679904:0">.</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="190d0ae73e4f43e0b9fd18eee10e336e"><span data-offset-key="190d0ae73e4f43e0b9fd18eee10e336e:0">Finally, you’ll write a few examples that walk you through some common use cases of </span><span data-offset-key="190d0ae73e4f43e0b9fd18eee10e336e:1">`deque`</span><span data-offset-key="190d0ae73e4f43e0b9fd18eee10e336e:2">, which is one of Python’s most powerful data types.</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="b20d8b3e79fd4a339939b5c29b36f73f"><span data-offset-key="b20d8b3e79fd4a339939b5c29b36f73f:0">**Free Bonus:**</span><span data-offset-key="b20d8b3e79fd4a339939b5c29b36f73f:1"> </span></span><a href="https://realpython.com/bonus/python-tricks-sample/" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="8b78602a45e94342a6111bea25c66021"><span data-offset-key="8b78602a45e94342a6111bea25c66021:0">Click here to get access to a chapter from Python Tricks: The Book</span></span></a><span data-key="c3333010820a44a88974dd713f533074"><span data-offset-key="c3333010820a44a88974dd713f533074:0"> that shows you Python’s best practices with simple examples you can apply instantly to write more beautiful + Pythonic code.</span></span></span>

<span class="text-4505230f--HeadingH600-23f228db--textContentFamily-49a318e1"><span data-key="c32f5ccb656a45daaab75251521e43bc"><span data-offset-key="c32f5ccb656a45daaab75251521e43bc:0">Getting Started With Python’s </span><span data-offset-key="c32f5ccb656a45daaab75251521e43bc:1">`deque`</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="25eecbe346314ccfaf295bc44b7a816d"><span data-offset-key="25eecbe346314ccfaf295bc44b7a816d:0">Appending items to and popping them from the right end of a Python list are normally efficient operations. If you use the </span></span><a href="https://en.wikipedia.org/wiki/Big_O_notation" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="2adefe5d64da4689b91f153280db0db4"><span data-offset-key="2adefe5d64da4689b91f153280db0db4:0">Big O notation</span></span></a><span data-key="d7d66649dc9b4ab8a6842b5ed8ab791e"><span data-offset-key="d7d66649dc9b4ab8a6842b5ed8ab791e:0"> for </span></span><a href="https://wiki.python.org/moin/TimeComplexity" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="a83d9aa154cf42de85f725515e3e45c7"><span data-offset-key="a83d9aa154cf42de85f725515e3e45c7:0">time complexity</span></span></a><span data-key="35b4dd1524734a428e08b685545a000a"><span data-offset-key="35b4dd1524734a428e08b685545a000a:0">, then you can say that they’re </span><span data-offset-key="35b4dd1524734a428e08b685545a000a:1">*O*</span><span data-offset-key="35b4dd1524734a428e08b685545a000a:2">(1). However, when Python needs to reallocate memory to grow the underlying list for accepting new items, these operations are slower and can become </span><span data-offset-key="35b4dd1524734a428e08b685545a000a:3">*O*</span><span data-offset-key="35b4dd1524734a428e08b685545a000a:4">(</span><span data-offset-key="35b4dd1524734a428e08b685545a000a:5">*n*</span><span data-offset-key="35b4dd1524734a428e08b685545a000a:6">).</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="34bccf7a68294eb48f6514107e8afd1d"><span data-offset-key="34bccf7a68294eb48f6514107e8afd1d:0">Additionally, appending and popping items on the left end of a Python list are known to be inefficient operations with </span><span data-offset-key="34bccf7a68294eb48f6514107e8afd1d:1">*O*</span><span data-offset-key="34bccf7a68294eb48f6514107e8afd1d:2">(</span><span data-offset-key="34bccf7a68294eb48f6514107e8afd1d:3">*n*</span><span data-offset-key="34bccf7a68294eb48f6514107e8afd1d:4">) speed.</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="16414877bef84a2f9c0359b813fb8c35"><span data-offset-key="16414877bef84a2f9c0359b813fb8c35:0">Since Python lists provide both operations with </span></span><a href="https://realpython.com/python-append/" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="7c4d6a8e90d94e6c8dabf786de9f5d61"><span data-offset-key="7c4d6a8e90d94e6c8dabf786de9f5d61:0"><code class="code-0458e21e" spellcheck="false" data-slate-leaf="true">.append()</code></span></span></a><span data-key="0a5ba7925b4b4db1aa718bb2be20331a"><span data-offset-key="0a5ba7925b4b4db1aa718bb2be20331a:0"> and </span><span data-offset-key="0a5ba7925b4b4db1aa718bb2be20331a:1">`.pop()`</span><span data-offset-key="0a5ba7925b4b4db1aa718bb2be20331a:2">, they’re usable as </span></span><a href="https://en.wikipedia.org/wiki/Stack_(abstract_data_type)" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="50320d46da4944c2947f52cb01572699"><span data-offset-key="50320d46da4944c2947f52cb01572699:0">stacks</span></span></a><span data-key="378bc23531ff43ee8e2b523d3b1e5bfc"><span data-offset-key="378bc23531ff43ee8e2b523d3b1e5bfc:0"> and </span></span><a href="https://en.wikipedia.org/wiki/Queue_(abstract_data_type)" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="f1c1c74e2f964d6e82fd9b455bf62380"><span data-offset-key="f1c1c74e2f964d6e82fd9b455bf62380:0">queues</span></span></a><span data-key="ac4fdbfb8332442ab5361e14d2e476cd"><span data-offset-key="ac4fdbfb8332442ab5361e14d2e476cd:0">. However, the performance issues you saw before can significantly affect the overall performance of your applications.</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="ef288f61afb745ea8fac462dcc763676"><span data-offset-key="ef288f61afb745ea8fac462dcc763676:0">Python’s </span></span><a href="https://docs.python.org/3/library/collections.html?highlight=collections#collections.deque" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="6d703e88b7544a0fa12fba9aa6303fc6"><span data-offset-key="6d703e88b7544a0fa12fba9aa6303fc6:0"><code class="code-0458e21e" spellcheck="false" data-slate-leaf="true">deque</code></span></span></a><span data-key="1f19fbc5d1814bd7b60e9ff96b352f81"><span data-offset-key="1f19fbc5d1814bd7b60e9ff96b352f81:0"> was the first data type added to the </span></span><a href="https://realpython.com/python-collections-module/" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="34ef9d37ea6240ccaf2efc2bbb0ee9f5"><span data-offset-key="34ef9d37ea6240ccaf2efc2bbb0ee9f5:0"><code class="code-0458e21e" spellcheck="false" data-slate-leaf="true">collections</code></span></span></a><span data-key="27102d625c88420c9f712140ea86663c"><span data-offset-key="27102d625c88420c9f712140ea86663c:0"> module back in </span></span><a href="https://docs.python.org/3/whatsnew/2.4.html#new-improved-and-deprecated-modules" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="273dcf185d3b4dce8fe66879e1648a60"><span data-offset-key="273dcf185d3b4dce8fe66879e1648a60:0">Python 2.4</span></span></a><span data-key="c0e293830b884236a4039b900733d7bf"><span data-offset-key="c0e293830b884236a4039b900733d7bf:0">. This data type was specially designed to overcome the efficiency problems of </span><span data-offset-key="c0e293830b884236a4039b900733d7bf:1">`.append()`</span><span data-offset-key="c0e293830b884236a4039b900733d7bf:2"> and </span><span data-offset-key="c0e293830b884236a4039b900733d7bf:3">`.pop()`</span><span data-offset-key="c0e293830b884236a4039b900733d7bf:4"> in Python list.</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="c4de96746c6b44e9903d860849f8bb62"><span data-offset-key="c4de96746c6b44e9903d860849f8bb62:0">Deques are sequence-like data types designed as a generalization of </span><span data-offset-key="c4de96746c6b44e9903d860849f8bb62:1">**stacks**</span><span data-offset-key="c4de96746c6b44e9903d860849f8bb62:2"> and </span><span data-offset-key="c4de96746c6b44e9903d860849f8bb62:3">**queues**</span><span data-offset-key="c4de96746c6b44e9903d860849f8bb62:4">. They support memory-efficient and fast append and pop operations on both ends of the data structure.</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="0d5ac2b57bd1490086e4d06276efd586"><span data-offset-key="0d5ac2b57bd1490086e4d06276efd586:0">**Note:**</span><span data-offset-key="0d5ac2b57bd1490086e4d06276efd586:1"> </span><span data-offset-key="0d5ac2b57bd1490086e4d06276efd586:2">`deque`</span><span data-offset-key="0d5ac2b57bd1490086e4d06276efd586:3"> is pronounced as “deck.” The name stands for </span></span><a href="https://en.wikipedia.org/wiki/Double-ended_queue" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="ab0f82699e16406b961019f4b7e022f6"><span data-offset-key="ab0f82699e16406b961019f4b7e022f6:0"><strong>d</strong></span><span data-offset-key="ab0f82699e16406b961019f4b7e022f6:1">ouble-</span><span data-offset-key="ab0f82699e16406b961019f4b7e022f6:2"><strong>e</strong></span><span data-offset-key="ab0f82699e16406b961019f4b7e022f6:3">nded </span><span data-offset-key="ab0f82699e16406b961019f4b7e022f6:4"><strong>que</strong></span><span data-offset-key="ab0f82699e16406b961019f4b7e022f6:5">ue</span></span></a><span data-key="77b4488a3ac440098240f6b15887f3db"><span data-offset-key="77b4488a3ac440098240f6b15887f3db:0">.</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="bb27b8048358434fad6bd54cf8203338"><span data-offset-key="bb27b8048358434fad6bd54cf8203338:0">Append and pop operations on both ends of a </span><span data-offset-key="bb27b8048358434fad6bd54cf8203338:1">`deque`</span><span data-offset-key="bb27b8048358434fad6bd54cf8203338:2"> object are stable and equally efficient because deques are </span></span><a href="https://github.com/python/cpython/blob/23acadcc1c75eb74b2459304af70d97a35001b34/Modules/_collectionsmodule.c#L34" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="c6f0f922fe8b40dd84701739dc6ba264"><span data-offset-key="c6f0f922fe8b40dd84701739dc6ba264:0">implemented</span></span></a><span data-key="4bbc799279094f83bcda576328c75648"><span data-offset-key="4bbc799279094f83bcda576328c75648:0"> as a </span></span><a href="https://realpython.com/linked-lists-python/#how-to-use-doubly-linked-lists" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="10abe67398c54744877107109f4ff098"><span data-offset-key="10abe67398c54744877107109f4ff098:0">doubly linked list</span></span></a><span data-key="e70a6b67cc6740c887163a7164cc102f"><span data-offset-key="e70a6b67cc6740c887163a7164cc102f:0">. Additionally, append and pop operations on deques are also </span></span><a href="https://en.wikipedia.org/wiki/Thread_safety" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="5a7ecebadf194d8292f3069137fa0a43"><span data-offset-key="5a7ecebadf194d8292f3069137fa0a43:0">thread safe</span></span></a><span data-key="031b3b48f5804b8da565ea52a866ae23"><span data-offset-key="031b3b48f5804b8da565ea52a866ae23:0"> and memory efficient. These features make deques particularly useful for creating custom stacks and queues in Python.</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="4a2505f80b7c498fbbd1042f67773ad6"><span data-offset-key="4a2505f80b7c498fbbd1042f67773ad6:0">Deques are also the way to go if you need to keep a list of last-seen items because you can restrict the maximum length of your deques. If you do so, then once a deque is full, it automatically discards items from one end when you append new items on the opposite end.</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="39aa7da9a2e4418c851dca4d6b6b8912"><span data-offset-key="39aa7da9a2e4418c851dca4d6b6b8912:0">Here’s a summary of the main characteristics of </span><span data-offset-key="39aa7da9a2e4418c851dca4d6b6b8912:1">`deque`</span><span data-offset-key="39aa7da9a2e4418c851dca4d6b6b8912:2">:</span></span></span>

-   <span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="d4e7f656330446cbad8f0764b2edd75c"><span data-offset-key="d4e7f656330446cbad8f0764b2edd75c:0">Stores items of any </span></span><a href="https://realpython.com/python-data-types/" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="65367e437a794f83aa9cd1fc35208194"><span data-offset-key="65367e437a794f83aa9cd1fc35208194:0">data type</span></span></a><span data-key="630e09f3577b45f28a73e85dc43ee2a6"><span data-offset-key="630e09f3577b45f28a73e85dc43ee2a6:0"><span data-slate-zero-width="z">​</span></span></span></span>

-   <span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="fe7c33bf005c4da89d7bfe67b925af99"><span data-offset-key="fe7c33bf005c4da89d7bfe67b925af99:0">Is a </span></span><a href="https://docs.python.org/3/glossary.html#term-mutable" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="b9d8dede513e4561aedcd924989bfbf4"><span data-offset-key="b9d8dede513e4561aedcd924989bfbf4:0">mutable</span></span></a><span data-key="166870ecbbab423296d935921ac9cd5f"><span data-offset-key="166870ecbbab423296d935921ac9cd5f:0"> data type</span></span></span>

-   <span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="e6b78a9f4dcb4efeb27bde31a8d5a993"><span data-offset-key="e6b78a9f4dcb4efeb27bde31a8d5a993:0">Supports </span></span><a href="https://realpython.com/python-boolean/#the-in-operator" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="355692726266447aba28fef163d8c920"><span data-offset-key="355692726266447aba28fef163d8c920:0">membership operations</span></span></a><span data-key="800a81b87f274c3bbe771399b5db9fa0"><span data-offset-key="800a81b87f274c3bbe771399b5db9fa0:0"> with the </span><span data-offset-key="800a81b87f274c3bbe771399b5db9fa0:1">`in`</span><span data-offset-key="800a81b87f274c3bbe771399b5db9fa0:2"> operator</span></span></span>

-   <span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="36fdee00b30c4abd987a7466ddd6b898"><span data-offset-key="36fdee00b30c4abd987a7466ddd6b898:0">Supports </span></span><a href="https://realpython.com/python-lists-tuples/#list-elements-can-be-accessed-by-index" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="75df6f2ae73e46a582df95287db02cd0"><span data-offset-key="75df6f2ae73e46a582df95287db02cd0:0">indexing</span></span></a><span data-key="bbf9423094a44fd9b49e1c448effd491"><span data-offset-key="bbf9423094a44fd9b49e1c448effd491:0">, like in </span><span data-offset-key="bbf9423094a44fd9b49e1c448effd491:1">`a_deque[i]`</span></span></span>

-   <span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="b1616dd2984d457d861ac77006c5bde8"><span data-offset-key="b1616dd2984d457d861ac77006c5bde8:0">Doesn’t support slicing, like in </span><span data-offset-key="b1616dd2984d457d861ac77006c5bde8:1">`a_deque[0:2]`</span></span></span>

-   <span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="3e832fad6c0f40a89a1f0359beb958b5"><span data-offset-key="3e832fad6c0f40a89a1f0359beb958b5:0">Supports built-in functions that operate on sequences and iterables, such as </span></span><a href="https://docs.python.org/3/library/functions.html#len" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="8ee2a7340ed342c99dc7d204d1842e0e"><span data-offset-key="8ee2a7340ed342c99dc7d204d1842e0e:0"><code class="code-0458e21e" spellcheck="false" data-slate-leaf="true">len()</code></span></span></a><span data-key="364462987e234d6099859fb7774f3b80"><span data-offset-key="364462987e234d6099859fb7774f3b80:0">, </span></span><a href="https://realpython.com/python-sort/" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="098ea5aa83af433da3dc0733c2f00b3a"><span data-offset-key="098ea5aa83af433da3dc0733c2f00b3a:0"><code class="code-0458e21e" spellcheck="false" data-slate-leaf="true">sorted()</code></span></span></a><span data-key="32d5a6a0122c450185bf5ed8a634adcd"><span data-offset-key="32d5a6a0122c450185bf5ed8a634adcd:0">, </span></span><a href="https://realpython.com/python-reverse-list/" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="9a565e949787400eb4cbfd6e91bd1450"><span data-offset-key="9a565e949787400eb4cbfd6e91bd1450:0"><code class="code-0458e21e" spellcheck="false" data-slate-leaf="true">reversed()</code></span></span></a><span data-key="fe6b530327524b26bb45bc8c9ccd709c"><span data-offset-key="fe6b530327524b26bb45bc8c9ccd709c:0">, and more</span></span></span>

-   <span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="a622d8ade59e46feae26a36a174fc20a"><span data-offset-key="a622d8ade59e46feae26a36a174fc20a:0">Doesn’t support </span></span><a href="https://en.wikipedia.org/wiki/In-place_algorithm" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="561d164ef4cd46a9985cdda819d88e82"><span data-offset-key="561d164ef4cd46a9985cdda819d88e82:0">in-place</span></span></a><span data-key="77770ac07351405dad2b18139ec25c12"><span data-offset-key="77770ac07351405dad2b18139ec25c12:0"> sorting</span></span></span>

-   <span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="5b960577831a49a889cd59d1085ab57c"><span data-offset-key="5b960577831a49a889cd59d1085ab57c:0">Supports normal and reverse iteration</span></span></span>

-   <span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="9148a391d5874577ab049170fdd04f88"><span data-offset-key="9148a391d5874577ab049170fdd04f88:0">Supports pickling with </span></span><a href="https://realpython.com/python-pickle-module/" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="edfdf181b112460bac4c1d1cf38f25b6"><span data-offset-key="edfdf181b112460bac4c1d1cf38f25b6:0"><code class="code-0458e21e" spellcheck="false" data-slate-leaf="true">pickle</code></span></span></a><span data-key="f7928e8778d847ca8108e1daa485cb9a"><span data-offset-key="f7928e8778d847ca8108e1daa485cb9a:0"><span data-slate-zero-width="z">​</span></span></span></span>

-   <span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="54c05a5ae4544b7a97ef3f760f365f61"><span data-offset-key="54c05a5ae4544b7a97ef3f760f365f61:0">Ensures fast, memory-efficient, and thread-safe pop and append operations on both ends</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="d42a34e65f5a4002b9880ba98dc4c800"><span data-offset-key="d42a34e65f5a4002b9880ba98dc4c800:0">Creating </span><span data-offset-key="d42a34e65f5a4002b9880ba98dc4c800:1">`deque`</span><span data-offset-key="d42a34e65f5a4002b9880ba98dc4c800:2"> instances is a straightforward process. You just need to import </span><span data-offset-key="d42a34e65f5a4002b9880ba98dc4c800:3">`deque`</span><span data-offset-key="d42a34e65f5a4002b9880ba98dc4c800:4"> from </span><span data-offset-key="d42a34e65f5a4002b9880ba98dc4c800:5">`collections`</span><span data-offset-key="d42a34e65f5a4002b9880ba98dc4c800:6"> and call it with an optional </span><span data-offset-key="d42a34e65f5a4002b9880ba98dc4c800:7">`iterable`</span><span data-offset-key="d42a34e65f5a4002b9880ba98dc4c800:8"> as an argument:&gt;&gt;&gt;</span></span></span>

    >>> from collections import deque​>>> # Create an empty deque>>> deque()deque([])​>>> # Use different iterables to create deques>>> deque((1, 2, 3, 4))deque([1, 2, 3, 4])​>>> deque([1, 2, 3, 4])deque([1, 2, 3, 4])​>>> deque(range(1, 5))deque([1, 2, 3, 4])​>>> deque("abcd")deque(['a', 'b', 'c', 'd'])​>>> numbers = {"one": 1, "two": 2, "three": 3, "four": 4}>>> deque(numbers.keys())deque(['one', 'two', 'three', 'four'])​>>> deque(numbers.values())deque([1, 2, 3, 4])​>>> deque(numbers.items())deque([('one', 1), ('two', 2), ('three', 3), ('four', 4)])

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="285f09e380bd45188831cbfbf0323290"><span data-offset-key="285f09e380bd45188831cbfbf0323290:0">If you instantiate </span><span data-offset-key="285f09e380bd45188831cbfbf0323290:1">`deque`</span><span data-offset-key="285f09e380bd45188831cbfbf0323290:2"> without providing an </span><span data-offset-key="285f09e380bd45188831cbfbf0323290:3">`iterable`</span><span data-offset-key="285f09e380bd45188831cbfbf0323290:4"> as an argument, then you get an empty deque. If you provide and input </span><span data-offset-key="285f09e380bd45188831cbfbf0323290:5">`iterable`</span><span data-offset-key="285f09e380bd45188831cbfbf0323290:6">, then </span><span data-offset-key="285f09e380bd45188831cbfbf0323290:7">`deque`</span><span data-offset-key="285f09e380bd45188831cbfbf0323290:8"> initializes the new instance with data from it. The initialization goes from left to right using </span></span><a href="https://docs.python.org/3/library/collections.html#collections.deque.append" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="c70f580f9a724802b7a645e7aa8ef6e3"><span data-offset-key="c70f580f9a724802b7a645e7aa8ef6e3:0"><code class="code-0458e21e" spellcheck="false" data-slate-leaf="true">deque.append()</code></span></span></a><span data-key="56a83a2e9f4548548d9eac00562546fa"><span data-offset-key="56a83a2e9f4548548d9eac00562546fa:0">.</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="deb14cf5af0e41e788fc82ac8a785db6"><span data-offset-key="deb14cf5af0e41e788fc82ac8a785db6:0">The </span><span data-offset-key="deb14cf5af0e41e788fc82ac8a785db6:1">`deque`</span><span data-offset-key="deb14cf5af0e41e788fc82ac8a785db6:2"> initializer takes the following two optional arguments:</span></span></span>

1.  <span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="5940222fa4f04214a937b284ebcdb12b"><span data-offset-key="5940222fa4f04214a937b284ebcdb12b:0">`iterable`</span><span data-offset-key="5940222fa4f04214a937b284ebcdb12b:1"> holds an iterable that provides the initialization data.</span></span></span>

2.  <span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="a75fa5595a5f4254bd910831fb2ae6c0"><span data-offset-key="a75fa5595a5f4254bd910831fb2ae6c0:0">`maxlen`</span><span data-offset-key="a75fa5595a5f4254bd910831fb2ae6c0:1"> holds an integer </span></span><a href="https://realpython.com/python-numbers/" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="53ea467fddc84c60b992776f29cf87f3"><span data-offset-key="53ea467fddc84c60b992776f29cf87f3:0">number</span></span></a><span data-key="afe8d619114c422da60b39ded2b71b95"><span data-offset-key="afe8d619114c422da60b39ded2b71b95:0"> that specifies the maximum length of the deque.</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="a1ad70a0e1d644079b75ac99f36563fd"><span data-offset-key="a1ad70a0e1d644079b75ac99f36563fd:0">As mentioned previously, if you don’t supply an </span><span data-offset-key="a1ad70a0e1d644079b75ac99f36563fd:1">`iterable`</span><span data-offset-key="a1ad70a0e1d644079b75ac99f36563fd:2">, then you get an empty deque. If you supply a value to </span></span><a href="https://docs.python.org/3/library/collections.html#collections.deque.maxlen" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="fea6e5fb833e4cba9b38e5c0e514e4c0"><span data-offset-key="fea6e5fb833e4cba9b38e5c0e514e4c0:0"><code class="code-0458e21e" spellcheck="false" data-slate-leaf="true">maxlen</code></span></span></a><span data-key="c11ff1ea1fbc48ce845775c650300251"><span data-offset-key="c11ff1ea1fbc48ce845775c650300251:0">, then your deque will only store up to </span><span data-offset-key="c11ff1ea1fbc48ce845775c650300251:1">`maxlen`</span><span data-offset-key="c11ff1ea1fbc48ce845775c650300251:2"> items.</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="511453a7a47d43ec8721270b35515c66"><span data-offset-key="511453a7a47d43ec8721270b35515c66:0">Finally, you can also use unordered iterables, such as </span></span><a href="https://realpython.com/python-sets/" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="c6d0a699194b4f09b106359dee43d15a"><span data-offset-key="c6d0a699194b4f09b106359dee43d15a:0">sets</span></span></a><span data-key="b3f21d505c614e4b8417b345a6d98268"><span data-offset-key="b3f21d505c614e4b8417b345a6d98268:0">, to initialize your deques. In those cases, you won’t have a predefined order for the items in the final deque.</span></span><a href="https://srv.realpython.net/click/5212255200/?c=56207115366&amp;p=58946116052&amp;r=72620" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="40a342d8e57e4dc8bbccd8bd583a3107"><span data-offset-key="40a342d8e57e4dc8bbccd8bd583a3107:0"><span data-slate-zero-width="z">​</span></span></span><span data-slate-void="true" data-key="a347c1d1f09c40e8b8184e0ba6021229"><span><span class="reset-3c756112--frameInlineVoid-73b6a96b" data-key="a347c1d1f09c40e8b8184e0ba6021229"><img src="https://img.realpython.net/655d5b5272a07eaebc6a0885e3bc64ec" class="image-67b14f24--image-54d049be" /></span></span></span><span data-key="8c605a829da241388b77cd7885d2f818"><span data-offset-key="8c605a829da241388b77cd7885d2f818:0"><span data-slate-zero-width="z">​</span></span></span></a><span data-key="152d7c94a54546c9ae1b155ba1f3183f"><span data-offset-key="152d7c94a54546c9ae1b155ba1f3183f:0"><span data-slate-zero-width="z">​</span></span></span><a href="https://realpython.com/account/join/" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="07ea5e4f6db14de6898db73e41967a85"><span data-offset-key="07ea5e4f6db14de6898db73e41967a85:0"> Remove ads</span></span></a><span data-key="275b4de909ca4ef4a908b53d7939bad6"><span data-offset-key="275b4de909ca4ef4a908b53d7939bad6:0"><span data-slate-zero-width="z">​</span></span></span></span>

<span class="text-4505230f--HeadingH600-23f228db--textContentFamily-49a318e1"><span data-key="b12e327bcaeb471aa2013608866ab617"><span data-offset-key="b12e327bcaeb471aa2013608866ab617:0">Popping and Appending Items Efficiently</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="24bc886ddc38406abddbd69939d118a0"><span data-offset-key="24bc886ddc38406abddbd69939d118a0:0">The most important difference between </span><span data-offset-key="24bc886ddc38406abddbd69939d118a0:1">`deque`</span><span data-offset-key="24bc886ddc38406abddbd69939d118a0:2"> and </span><span data-offset-key="24bc886ddc38406abddbd69939d118a0:3">`list`</span><span data-offset-key="24bc886ddc38406abddbd69939d118a0:4"> is that the former allows you to perform efficient append and pop operations on both ends of the sequence. The </span><span data-offset-key="24bc886ddc38406abddbd69939d118a0:5">`deque`</span><span data-offset-key="24bc886ddc38406abddbd69939d118a0:6"> class implements dedicated </span></span><a href="https://docs.python.org/3/library/collections.html#collections.deque.popleft" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="bf9ef67675ae4949bb71d101fe51ae66"><span data-offset-key="bf9ef67675ae4949bb71d101fe51ae66:0"><code class="code-0458e21e" spellcheck="false" data-slate-leaf="true">.popleft()</code></span></span></a><span data-key="77fa223cbe6d4ffe9a92ff939a8e19b1"><span data-offset-key="77fa223cbe6d4ffe9a92ff939a8e19b1:0"> and </span></span><a href="https://docs.python.org/3/library/collections.html#collections.deque.appendleft" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="97d405747e1346a4beb13168b717c404"><span data-offset-key="97d405747e1346a4beb13168b717c404:0"><code class="code-0458e21e" spellcheck="false" data-slate-leaf="true">.appendleft()</code></span></span></a><span data-key="aecf53d2329d46839940daaa11ecc93f"><span data-offset-key="aecf53d2329d46839940daaa11ecc93f:0"> methods that operate on the left end of the sequence directly:&gt;&gt;&gt;</span></span></span>

    >>> from collections import deque​>>> numbers = deque([1, 2, 3, 4])>>> numbers.popleft()1>>> numbers.popleft()2>>> numbersdeque([3, 4])​>>> numbers.appendleft(2)>>> numbers.appendleft(1)>>> numbersdeque([1, 2, 3, 4])

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="35612150b2d04bf885bc1c4425e72346"><span data-offset-key="35612150b2d04bf885bc1c4425e72346:0">Here, you use </span><span data-offset-key="35612150b2d04bf885bc1c4425e72346:1">`.popleft()`</span><span data-offset-key="35612150b2d04bf885bc1c4425e72346:2"> and </span><span data-offset-key="35612150b2d04bf885bc1c4425e72346:3">`.appendleft()`</span><span data-offset-key="35612150b2d04bf885bc1c4425e72346:4"> to remove and add values, respectively, to the left end of </span><span data-offset-key="35612150b2d04bf885bc1c4425e72346:5">`numbers`</span><span data-offset-key="35612150b2d04bf885bc1c4425e72346:6">. These methods are specific to the design of </span><span data-offset-key="35612150b2d04bf885bc1c4425e72346:7">`deque`</span><span data-offset-key="35612150b2d04bf885bc1c4425e72346:8">, and you won’t find them in </span><span data-offset-key="35612150b2d04bf885bc1c4425e72346:9">`list`</span><span data-offset-key="35612150b2d04bf885bc1c4425e72346:10">.</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="17b68f449fad4105adbb96e3f6983a00"><span data-offset-key="17b68f449fad4105adbb96e3f6983a00:0">Just like </span><span data-offset-key="17b68f449fad4105adbb96e3f6983a00:1">`list`</span><span data-offset-key="17b68f449fad4105adbb96e3f6983a00:2">, </span><span data-offset-key="17b68f449fad4105adbb96e3f6983a00:3">`deque`</span><span data-offset-key="17b68f449fad4105adbb96e3f6983a00:4"> also provides </span><span data-offset-key="17b68f449fad4105adbb96e3f6983a00:5">`.append()`</span><span data-offset-key="17b68f449fad4105adbb96e3f6983a00:6"> and </span></span><a href="https://docs.python.org/3/library/collections.html#collections.deque.pop" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="091ee670ee7946229868245f4aeb2d36"><span data-offset-key="091ee670ee7946229868245f4aeb2d36:0"><code class="code-0458e21e" spellcheck="false" data-slate-leaf="true">.pop()</code></span></span></a><span data-key="8587249aa3ea45c2b1619f0949c72815"><span data-offset-key="8587249aa3ea45c2b1619f0949c72815:0"> methods to operate on the right end of the sequence. However, </span><span data-offset-key="8587249aa3ea45c2b1619f0949c72815:1">`.pop()`</span><span data-offset-key="8587249aa3ea45c2b1619f0949c72815:2"> behaves differently:&gt;&gt;&gt;</span></span></span>

    >>> from collections import deque​>>> numbers = deque([1, 2, 3, 4])>>> numbers.pop()4​>>> numbers.pop(0)Traceback (most recent call last):  File "<stdin>", line 1, in <module>TypeError: pop() takes no arguments (1 given)

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="13f3ebd78b28491c9cf7f1508f683c1c"><span data-offset-key="13f3ebd78b28491c9cf7f1508f683c1c:0">Here, </span><span data-offset-key="13f3ebd78b28491c9cf7f1508f683c1c:1">`.pop()`</span><span data-offset-key="13f3ebd78b28491c9cf7f1508f683c1c:2"> removes and returns the last value in the deque. The method doesn’t take an index as an argument, so you can’t use it to remove arbitrary items from your deques. You can only use it to remove and return the rightmost item.</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="cb318e93ffca45c7a75d090c47156d3a"><span data-offset-key="cb318e93ffca45c7a75d090c47156d3a:0">As you learned earlier, </span><span data-offset-key="cb318e93ffca45c7a75d090c47156d3a:1">`deque`</span><span data-offset-key="cb318e93ffca45c7a75d090c47156d3a:2"> is implemented as a </span><span data-offset-key="cb318e93ffca45c7a75d090c47156d3a:3">**doubly linked list**</span><span data-offset-key="cb318e93ffca45c7a75d090c47156d3a:4">. So, every item in a given deque holds a reference (</span></span><a href="https://realpython.com/pointers-in-python/" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="8b3c05131448412292355eb9ab870048"><span data-offset-key="8b3c05131448412292355eb9ab870048:0">pointer</span></span></a><span data-key="dfacdc5403ca4a2a85320ef314b6b2c3"><span data-offset-key="dfacdc5403ca4a2a85320ef314b6b2c3:0">) to the next and previous item in the sequence.</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="00712cb1a63a446698365bc8623c7973"><span data-offset-key="00712cb1a63a446698365bc8623c7973:0">Doubly linked lists make appending and popping items from either end light and efficient operations. That’s possible because only the pointers need to be updated. As a result, both operations have similar performance, </span><span data-offset-key="00712cb1a63a446698365bc8623c7973:1">*O*</span><span data-offset-key="00712cb1a63a446698365bc8623c7973:2">(1). They’re also predictable performance-wise because there’s no need for reallocating memory and moving existing items to accept new ones.</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="c43f1ba3f8484f939c08736385b8889e"><span data-offset-key="c43f1ba3f8484f939c08736385b8889e:0">Appending and popping items from the left end of a regular Python list requires shifting all the items, which ends up being an </span><span data-offset-key="c43f1ba3f8484f939c08736385b8889e:1">*O*</span><span data-offset-key="c43f1ba3f8484f939c08736385b8889e:2">(</span><span data-offset-key="c43f1ba3f8484f939c08736385b8889e:3">*n*</span><span data-offset-key="c43f1ba3f8484f939c08736385b8889e:4">) operation. Additionally, adding items to the right end of a list often requires Python to reallocate memory and copy the current items to the new memory location. After that, it can add the new items. This process takes longer to complete, and the append operation passes from being </span><span data-offset-key="c43f1ba3f8484f939c08736385b8889e:5">*O*</span><span data-offset-key="c43f1ba3f8484f939c08736385b8889e:6">(1) to </span><span data-offset-key="c43f1ba3f8484f939c08736385b8889e:7">*O*</span><span data-offset-key="c43f1ba3f8484f939c08736385b8889e:8">(</span><span data-offset-key="c43f1ba3f8484f939c08736385b8889e:9">*n*</span><span data-offset-key="c43f1ba3f8484f939c08736385b8889e:10">).</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="15bfb8cd80d6416bb17d4953f8b05f94"><span data-offset-key="15bfb8cd80d6416bb17d4953f8b05f94:0">Consider the following performance tests for appending items to the left end of a sequence, </span><span data-offset-key="15bfb8cd80d6416bb17d4953f8b05f94:1">`deque`</span><span data-offset-key="15bfb8cd80d6416bb17d4953f8b05f94:2"> vs </span><span data-offset-key="15bfb8cd80d6416bb17d4953f8b05f94:3">`list`</span><span data-offset-key="15bfb8cd80d6416bb17d4953f8b05f94:4">:</span></span></span>

    # time_append.py​from collections import dequefrom time import perf_counter​TIMES = 10_000a_list = []a_deque = deque()​def average_time(func, times):    total = 0.0    for i in range(times):        start = perf_counter()        func(i)        total += (perf_counter() - start) * 1e9    return total / times​list_time = average_time(lambda i: a_list.insert(0, i), TIMES)deque_time = average_time(lambda i: a_deque.appendleft(i), TIMES)gain = list_time / deque_time​print(f"list.insert()      {list_time:.6} ns")print(f"deque.appendleft() {deque_time:.6} ns  ({gain:.6}x faster)")

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="df9c8cec97da4646bff14be46883e8e5"><span data-offset-key="df9c8cec97da4646bff14be46883e8e5:0">In this script, </span><span data-offset-key="df9c8cec97da4646bff14be46883e8e5:1">`average_time()`</span><span data-offset-key="df9c8cec97da4646bff14be46883e8e5:2"> computes the average time that executing a function (</span><span data-offset-key="df9c8cec97da4646bff14be46883e8e5:3">`func`</span><span data-offset-key="df9c8cec97da4646bff14be46883e8e5:4">) a given number of </span><span data-offset-key="df9c8cec97da4646bff14be46883e8e5:5">`times`</span><span data-offset-key="df9c8cec97da4646bff14be46883e8e5:6"> takes. If you </span></span><a href="https://realpython.com/run-python-scripts/" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="d24aceef9370442aa2f14ac52ad746f3"><span data-offset-key="d24aceef9370442aa2f14ac52ad746f3:0">run the script</span></span></a><span data-key="71ee1872bd974659a570214799fcc60e"><span data-offset-key="71ee1872bd974659a570214799fcc60e:0"> from your command line, then you get the following output:</span></span></span>

    $ python time_append.pylist.insert()      3735.08 nsdeque.appendleft() 238.889 ns  (15.6352x faster)

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="83260d7dbee04479ba6c249305fb4b2d"><span data-offset-key="83260d7dbee04479ba6c249305fb4b2d:0">In this specific example, </span><span data-offset-key="83260d7dbee04479ba6c249305fb4b2d:1">`.appendleft()`</span><span data-offset-key="83260d7dbee04479ba6c249305fb4b2d:2"> on a </span><span data-offset-key="83260d7dbee04479ba6c249305fb4b2d:3">`deque`</span><span data-offset-key="83260d7dbee04479ba6c249305fb4b2d:4"> is several times faster than </span><span data-offset-key="83260d7dbee04479ba6c249305fb4b2d:5">`.insert()`</span><span data-offset-key="83260d7dbee04479ba6c249305fb4b2d:6"> on a </span><span data-offset-key="83260d7dbee04479ba6c249305fb4b2d:7">`list`</span><span data-offset-key="83260d7dbee04479ba6c249305fb4b2d:8">. Note that </span><span data-offset-key="83260d7dbee04479ba6c249305fb4b2d:9">`deque.appendleft()`</span><span data-offset-key="83260d7dbee04479ba6c249305fb4b2d:10"> is </span><span data-offset-key="83260d7dbee04479ba6c249305fb4b2d:11">*O*</span><span data-offset-key="83260d7dbee04479ba6c249305fb4b2d:12">(1), which means that the execution time is constant. However, </span><span data-offset-key="83260d7dbee04479ba6c249305fb4b2d:13">`list.insert()`</span><span data-offset-key="83260d7dbee04479ba6c249305fb4b2d:14"> on the left end of the list is </span><span data-offset-key="83260d7dbee04479ba6c249305fb4b2d:15">*O*</span><span data-offset-key="83260d7dbee04479ba6c249305fb4b2d:16">(</span><span data-offset-key="83260d7dbee04479ba6c249305fb4b2d:17">*n*</span><span data-offset-key="83260d7dbee04479ba6c249305fb4b2d:18">), which means that the execution time depends on the number of items to process.</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="d790c3f27b484a1a978afdcc9a743d79"><span data-offset-key="d790c3f27b484a1a978afdcc9a743d79:0">In this example, if you increment the value of </span><span data-offset-key="d790c3f27b484a1a978afdcc9a743d79:1">`TIMES`</span><span data-offset-key="d790c3f27b484a1a978afdcc9a743d79:2">, then you’ll get higher time measurements for </span><span data-offset-key="d790c3f27b484a1a978afdcc9a743d79:3">`list.insert()`</span><span data-offset-key="d790c3f27b484a1a978afdcc9a743d79:4"> but stable (constant) results for </span><span data-offset-key="d790c3f27b484a1a978afdcc9a743d79:5">`deque.appendleft()`</span><span data-offset-key="d790c3f27b484a1a978afdcc9a743d79:6">. If you’d like to try a similar performance test on pop operations for both deques and lists, then you can expand the exercise block below and compare your results to </span><span data-offset-key="d790c3f27b484a1a978afdcc9a743d79:7">*Real Python*</span><span data-offset-key="d790c3f27b484a1a978afdcc9a743d79:8">‘s after you’re done.</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="f36a852266da40078249d6cd7461fce0"><span data-offset-key="f36a852266da40078249d6cd7461fce0:0">Exercise: Test </span><span data-offset-key="f36a852266da40078249d6cd7461fce0:1">`deque.popleft()`</span><span data-offset-key="f36a852266da40078249d6cd7461fce0:2"> vs </span><span data-offset-key="f36a852266da40078249d6cd7461fce0:3">`list.pop(0)`</span><span data-offset-key="f36a852266da40078249d6cd7461fce0:4"> performanceShow/Hide</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="5c66d6660176456e8f74bfb816acb51a"><span data-offset-key="5c66d6660176456e8f74bfb816acb51a:0">Solution: Test </span><span data-offset-key="5c66d6660176456e8f74bfb816acb51a:1">`deque.popleft()`</span><span data-offset-key="5c66d6660176456e8f74bfb816acb51a:2"> vs </span><span data-offset-key="5c66d6660176456e8f74bfb816acb51a:3">`list.pop(0)`</span><span data-offset-key="5c66d6660176456e8f74bfb816acb51a:4"> performanceShow/Hide</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="4ffb9d2f14a64cd283be4b2d4a6083fa"><span data-offset-key="4ffb9d2f14a64cd283be4b2d4a6083fa:0">The </span><span data-offset-key="4ffb9d2f14a64cd283be4b2d4a6083fa:1">`deque`</span><span data-offset-key="4ffb9d2f14a64cd283be4b2d4a6083fa:2"> data type was designed to guarantee efficient append and pop operations on either end of the sequence. It’s ideal for approaching problems that require the implementation of queue and stack data structures in Python.</span></span></span>

<span class="text-4505230f--HeadingH600-23f228db--textContentFamily-49a318e1"><span data-key="242614b80c614c2d8d8964006910528d"><span data-offset-key="242614b80c614c2d8d8964006910528d:0">Accessing Random Items in a </span><span data-offset-key="242614b80c614c2d8d8964006910528d:1">`deque`</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="cdcab0fb7bbf453ebe7897dbac9d4896"><span data-offset-key="cdcab0fb7bbf453ebe7897dbac9d4896:0">Python’s </span><span data-offset-key="cdcab0fb7bbf453ebe7897dbac9d4896:1">`deque`</span><span data-offset-key="cdcab0fb7bbf453ebe7897dbac9d4896:2"> returns mutable sequences that work quite similarly to lists. Besides allowing you to append and pop items from their ends efficiently, deques provide a group of list-like methods and other sequence-like operations to work with items at arbitrary locations. Here are some of them:</span></span></span>

<table><colgroup><col style="width: 50%" /><col style="width: 50%" /></colgroup><tbody><tr class="odd"><td style="text-align: left;"><p><span class="text-4505230f--UIH400-4e41e82a--textContentFamily-49a318e1"><span data-key="ea8fec72a9f34f5aa271491433d27420"><span data-offset-key="ea8fec72a9f34f5aa271491433d27420:0">Option</span></span></span></p></td><td style="text-align: left;"><p><span class="text-4505230f--UIH400-4e41e82a--textContentFamily-49a318e1"><span data-key="4453dbd5c2424e4a92d6d1e9362ff722"><span data-offset-key="4453dbd5c2424e4a92d6d1e9362ff722:0">Description</span></span></span></p></td></tr><tr class="even"><td style="text-align: left;"><p><span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="b6878e31325241eb93a493929c35dd88"><span data-offset-key="b6878e31325241eb93a493929c35dd88:0"><span data-slate-zero-width="z">​</span></span></span><a href="https://docs.python.org/3/library/collections.html#collections.deque.insert" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="cd6fa3e874964136914dcdc7b7e8fa2b"><span data-offset-key="cd6fa3e874964136914dcdc7b7e8fa2b:0"><code class="code-0458e21e" spellcheck="false" data-slate-leaf="true">.insert(i, value)</code></span></span></a><span data-key="253f11efba724635a4db6f923ad83656"><span data-offset-key="253f11efba724635a4db6f923ad83656:0"><span data-slate-zero-width="z">​</span></span></span></span></p></td><td style="text-align: left;"><p><span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="194349f9dee94c249c93ce9a04f9d469"><span data-offset-key="194349f9dee94c249c93ce9a04f9d469:0">Insert an item </span><span data-offset-key="194349f9dee94c249c93ce9a04f9d469:1"><code class="code-0458e21e" spellcheck="false" data-slate-leaf="true">value</code></span><span data-offset-key="194349f9dee94c249c93ce9a04f9d469:2"> into a deque at index </span><span data-offset-key="194349f9dee94c249c93ce9a04f9d469:3"><code class="code-0458e21e" spellcheck="false" data-slate-leaf="true">i</code></span><span data-offset-key="194349f9dee94c249c93ce9a04f9d469:4">.</span></span></span></p></td></tr><tr class="odd"><td style="text-align: left;"><p><span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="656ce4c70e7d4363a9d7b2f287128798"><span data-offset-key="656ce4c70e7d4363a9d7b2f287128798:0"><span data-slate-zero-width="z">​</span></span></span><a href="https://docs.python.org/3/library/collections.html#collections.deque.remove" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="20ef94e45fa64451bebac91b3bd02c10"><span data-offset-key="20ef94e45fa64451bebac91b3bd02c10:0"><code class="code-0458e21e" spellcheck="false" data-slate-leaf="true">.remove(value)</code></span></span></a><span data-key="76def4a75c834da294354230ba7bfef0"><span data-offset-key="76def4a75c834da294354230ba7bfef0:0"><span data-slate-zero-width="z">​</span></span></span></span></p></td><td style="text-align: left;"><p><span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="0f41f36f6a3442a3a7a2e44c3507fa85"><span data-offset-key="0f41f36f6a3442a3a7a2e44c3507fa85:0">Remove the first occurrence of </span><span data-offset-key="0f41f36f6a3442a3a7a2e44c3507fa85:1"><code class="code-0458e21e" spellcheck="false" data-slate-leaf="true">value</code></span><span data-offset-key="0f41f36f6a3442a3a7a2e44c3507fa85:2">, raising </span></span><a href="https://docs.python.org/3/library/exceptions.html#ValueError" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="1466e6cef60a4a67ba65cc871f953626"><span data-offset-key="1466e6cef60a4a67ba65cc871f953626:0"><code class="code-0458e21e" spellcheck="false" data-slate-leaf="true">ValueError</code></span></span></a><span data-key="821f917dfe4841f7ae058b826277920f"><span data-offset-key="821f917dfe4841f7ae058b826277920f:0"> if the </span><span data-offset-key="821f917dfe4841f7ae058b826277920f:1"><code class="code-0458e21e" spellcheck="false" data-slate-leaf="true">value</code></span><span data-offset-key="821f917dfe4841f7ae058b826277920f:2"> doesn’t exist.</span></span></span></p></td></tr><tr class="even"><td style="text-align: left;"><p><span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="e276183c4d464c35b732862fd52db198"><span data-offset-key="e276183c4d464c35b732862fd52db198:0"><span data-slate-zero-width="z">​</span></span></span><a href="https://docs.python.org/3/library/stdtypes.html#common-sequence-operations" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="18554ffe22f34a09b4ecba8f315c6ded"><span data-offset-key="18554ffe22f34a09b4ecba8f315c6ded:0"><code class="code-0458e21e" spellcheck="false" data-slate-leaf="true">a_deque[i]</code></span></span></a><span data-key="9e0df301d58542aca7262315af657944"><span data-offset-key="9e0df301d58542aca7262315af657944:0"><span data-slate-zero-width="z">​</span></span></span></span></p></td><td style="text-align: left;"><p><span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="95b04a15b541475c84bc6f1c68d2e841"><span data-offset-key="95b04a15b541475c84bc6f1c68d2e841:0">Retrieve the item at index </span><span data-offset-key="95b04a15b541475c84bc6f1c68d2e841:1"><code class="code-0458e21e" spellcheck="false" data-slate-leaf="true">i</code></span><span data-offset-key="95b04a15b541475c84bc6f1c68d2e841:2"> from a deque.</span></span></span></p></td></tr><tr class="odd"><td style="text-align: left;"><p><span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="e90aebd15bf14dec8d7b3394abff798a"><span data-offset-key="e90aebd15bf14dec8d7b3394abff798a:0"><span data-slate-zero-width="z">​</span></span></span><a href="https://docs.python.org/3/library/stdtypes.html#immutable-sequence-types" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="730c1346b09342568d70a0f2f9db2bd7"><span data-offset-key="730c1346b09342568d70a0f2f9db2bd7:0"><code class="code-0458e21e" spellcheck="false" data-slate-leaf="true">del a_deque[i]</code></span></span></a><span data-key="66533ff12aed46cd936b004ef26987b3"><span data-offset-key="66533ff12aed46cd936b004ef26987b3:0"><span data-slate-zero-width="z">​</span></span></span></span></p></td><td style="text-align: left;"><p><span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="1217cc22738d4fa6b1dabc3183fd3a34"><span data-offset-key="1217cc22738d4fa6b1dabc3183fd3a34:0">Remove the item at index </span><span data-offset-key="1217cc22738d4fa6b1dabc3183fd3a34:1"><code class="code-0458e21e" spellcheck="false" data-slate-leaf="true">i</code></span><span data-offset-key="1217cc22738d4fa6b1dabc3183fd3a34:2"> from a deque.</span></span></span></p></td></tr></tbody></table>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="f0fdea519db749798fe6bb18f82f57c7"><span data-offset-key="f0fdea519db749798fe6bb18f82f57c7:0">You can use these methods and techniques to work with items at any position inside a </span><span data-offset-key="f0fdea519db749798fe6bb18f82f57c7:1">`deque`</span><span data-offset-key="f0fdea519db749798fe6bb18f82f57c7:2"> object. Here’s how to do that:&gt;&gt;&gt;</span></span></span>

    >>> from collections import deque​>>> letters = deque("abde")​>>> letters.insert(2, "c")>>> lettersdeque(['a', 'b', 'c', 'd', 'e'])​>>> letters.remove("d")>>> lettersdeque(['a', 'b', 'c', 'e'])​>>> letters[1]'b'​>>> del letters[2]>>> lettersdeque(['a', 'b', 'e'])

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="3773f1d4e1e24bb58be73d64402712f6"><span data-offset-key="3773f1d4e1e24bb58be73d64402712f6:0">Here, you first insert </span><span data-offset-key="3773f1d4e1e24bb58be73d64402712f6:1">`"c"`</span><span data-offset-key="3773f1d4e1e24bb58be73d64402712f6:2"> into </span><span data-offset-key="3773f1d4e1e24bb58be73d64402712f6:3">`letters`</span><span data-offset-key="3773f1d4e1e24bb58be73d64402712f6:4"> at position </span><span data-offset-key="3773f1d4e1e24bb58be73d64402712f6:5">`2`</span><span data-offset-key="3773f1d4e1e24bb58be73d64402712f6:6">. Then you remove </span><span data-offset-key="3773f1d4e1e24bb58be73d64402712f6:7">`"d"`</span><span data-offset-key="3773f1d4e1e24bb58be73d64402712f6:8"> from the deque using </span><span data-offset-key="3773f1d4e1e24bb58be73d64402712f6:9">`.remove()`</span><span data-offset-key="3773f1d4e1e24bb58be73d64402712f6:10">. Deques also allow </span><span data-offset-key="3773f1d4e1e24bb58be73d64402712f6:11">**indexing**</span><span data-offset-key="3773f1d4e1e24bb58be73d64402712f6:12"> to access items, which you use here to access </span><span data-offset-key="3773f1d4e1e24bb58be73d64402712f6:13">`"b"`</span><span data-offset-key="3773f1d4e1e24bb58be73d64402712f6:14"> at index </span><span data-offset-key="3773f1d4e1e24bb58be73d64402712f6:15">`1`</span><span data-offset-key="3773f1d4e1e24bb58be73d64402712f6:16">. Finally, you can use the </span><span data-offset-key="3773f1d4e1e24bb58be73d64402712f6:17">`del`</span><span data-offset-key="3773f1d4e1e24bb58be73d64402712f6:18"> </span></span><a href="https://realpython.com/python-keywords/" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="dad05dd9381c4b0089d62791c453ea3f"><span data-offset-key="dad05dd9381c4b0089d62791c453ea3f:0">keyword</span></span></a><span data-key="3c581cf05c74451e97f22cd316bc8809"><span data-offset-key="3c581cf05c74451e97f22cd316bc8809:0"> to delete any existing items from a deque. Note that </span><span data-offset-key="3c581cf05c74451e97f22cd316bc8809:1">`.remove()`</span><span data-offset-key="3c581cf05c74451e97f22cd316bc8809:2"> lets you delete items </span><span data-offset-key="3c581cf05c74451e97f22cd316bc8809:3">*by value*</span><span data-offset-key="3c581cf05c74451e97f22cd316bc8809:4">, while </span><span data-offset-key="3c581cf05c74451e97f22cd316bc8809:5">`del`</span><span data-offset-key="3c581cf05c74451e97f22cd316bc8809:6"> removes items </span><span data-offset-key="3c581cf05c74451e97f22cd316bc8809:7">*by index*</span><span data-offset-key="3c581cf05c74451e97f22cd316bc8809:8">.</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="c7a24d4ad82d4349bd34e19fc63bb393"><span data-offset-key="c7a24d4ad82d4349bd34e19fc63bb393:0">Even though </span><span data-offset-key="c7a24d4ad82d4349bd34e19fc63bb393:1">`deque`</span><span data-offset-key="c7a24d4ad82d4349bd34e19fc63bb393:2"> objects support indexing, they don’t support </span><span data-offset-key="c7a24d4ad82d4349bd34e19fc63bb393:3">**slicing**</span><span data-offset-key="c7a24d4ad82d4349bd34e19fc63bb393:4">. In other words, you can’t extract a </span></span><a href="https://docs.python.org/3/glossary.html#term-slice" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="4955d1d610b94adaae293f5173c076f1"><span data-offset-key="4955d1d610b94adaae293f5173c076f1:0">slice</span></span></a><span data-key="4573e1e13a364d09accb0925fdd5f543"><span data-offset-key="4573e1e13a364d09accb0925fdd5f543:0"> from an existing deque using the </span></span><a href="https://docs.python.org/3/whatsnew/2.3.html?highlight=slicing#extended-slices" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="8c814f7c31144c22aba1832d346fc85e"><span data-offset-key="8c814f7c31144c22aba1832d346fc85e:0">slicing syntax</span></span></a><span data-key="8a5b4ba94ea34cc3a292faf15e472d2b"><span data-offset-key="8a5b4ba94ea34cc3a292faf15e472d2b:0">, </span><span data-offset-key="8a5b4ba94ea34cc3a292faf15e472d2b:1">`[start:stop:step]`</span><span data-offset-key="8a5b4ba94ea34cc3a292faf15e472d2b:2">, as you would with a regular list:&gt;&gt;&gt;</span></span></span>

    >>> from collections import deque​>>> numbers = deque([1, 2, 3, 4, 5])​>>> numbers[1:3]Traceback (most recent call last):  File "<stdin>", line 1, in <module>TypeError: sequence index must be integer, not 'slice'

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="64cc91a5ccbe4f3fab91921453f2275f"><span data-offset-key="64cc91a5ccbe4f3fab91921453f2275f:0">Deques support indexing, but interestingly, they don’t support slicing. When you try to get a slice from a deque, you get a </span><span data-offset-key="64cc91a5ccbe4f3fab91921453f2275f:1">`TypeError`</span><span data-offset-key="64cc91a5ccbe4f3fab91921453f2275f:2">. In general, performing a slicing on a linked list would be inefficient, so the operation isn’t available.</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="0e481790f7ea456f9c9406e0c77f7926"><span data-offset-key="0e481790f7ea456f9c9406e0c77f7926:0">So far, you’ve seen that </span><span data-offset-key="0e481790f7ea456f9c9406e0c77f7926:1">`deque`</span><span data-offset-key="0e481790f7ea456f9c9406e0c77f7926:2"> is quite similar to </span><span data-offset-key="0e481790f7ea456f9c9406e0c77f7926:3">`list`</span><span data-offset-key="0e481790f7ea456f9c9406e0c77f7926:4">. However, while </span><span data-offset-key="0e481790f7ea456f9c9406e0c77f7926:5">`list`</span><span data-offset-key="0e481790f7ea456f9c9406e0c77f7926:6"> is based on </span></span><a href="https://en.wikipedia.org/wiki/Array_data_structure" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="02a8850cb5444d46958c78ddc7ce6bc1"><span data-offset-key="02a8850cb5444d46958c78ddc7ce6bc1:0">arrays</span></span></a><span data-key="77b849a41091485babde51937de67c8e"><span data-offset-key="77b849a41091485babde51937de67c8e:0">, </span><span data-offset-key="77b849a41091485babde51937de67c8e:1">`deque`</span><span data-offset-key="77b849a41091485babde51937de67c8e:2"> is based on a doubly linked list.</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="33188e5c5157472ead17ca4784cda251"><span data-offset-key="33188e5c5157472ead17ca4784cda251:0">There is a hidden cost behind </span><span data-offset-key="33188e5c5157472ead17ca4784cda251:1">`deque`</span><span data-offset-key="33188e5c5157472ead17ca4784cda251:2"> being implemented as a doubly linked list: accessing, inserting, and removing arbitrary items aren’t efficient operations. To perform them, the </span></span><a href="https://realpython.com/interacting-with-python/#starting-the-interpreter" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="a18d25829f8b4fad9b4d125fcf064fcb"><span data-offset-key="a18d25829f8b4fad9b4d125fcf064fcb:0">interpreter</span></span></a><span data-key="e364cf3b788f4f0d8414955cd6f7d818"><span data-offset-key="e364cf3b788f4f0d8414955cd6f7d818:0"> has to iterate through the deque until it gets to the desired item. So, they’re </span><span data-offset-key="e364cf3b788f4f0d8414955cd6f7d818:1">*O*</span><span data-offset-key="e364cf3b788f4f0d8414955cd6f7d818:2">(</span><span data-offset-key="e364cf3b788f4f0d8414955cd6f7d818:3">*n*</span><span data-offset-key="e364cf3b788f4f0d8414955cd6f7d818:4">) instead of </span><span data-offset-key="e364cf3b788f4f0d8414955cd6f7d818:5">*O*</span><span data-offset-key="e364cf3b788f4f0d8414955cd6f7d818:6">(1) operations.</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="72b52ee2dd5546be805de92cca7ead3c"><span data-offset-key="72b52ee2dd5546be805de92cca7ead3c:0">Here’s a script that shows how deques and lists behave when it comes to working with arbitrary items:</span></span></span>

    # time_random_access.py​from collections import dequefrom time import perf_counter​TIMES = 10_000a_list = [1] * TIMESa_deque = deque(a_list)​def average_time(func, times):    total = 0.0    for _ in range(times):        start = perf_counter()        func()        total += (perf_counter() - start) * 1e6    return total / times​def time_it(sequence):    middle = len(sequence) // 2    sequence.insert(middle, "middle")    sequence[middle]    sequence.remove("middle")    del sequence[middle]​list_time = average_time(lambda: time_it(a_list), TIMES)deque_time = average_time(lambda: time_it(a_deque), TIMES)gain = deque_time / list_time​print(f"list  {list_time:.6} μs ({gain:.6}x faster)")print(f"deque {deque_time:.6} μs")

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="a3c6b5fcb9804922b2930cf4528fdb8a"><span data-offset-key="a3c6b5fcb9804922b2930cf4528fdb8a:0">This script times inserting, deleting, and accessing items in the middle of a deque and a list. If you run the script, then you get an output that looks like the following:</span></span></span>

    $ python time_random_access.pylist  63.8658 μs (1.44517x faster)deque 92.2968 μs

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="e2cb78c7cbcb474e969ca72284f80eab"><span data-offset-key="e2cb78c7cbcb474e969ca72284f80eab:0">Deques aren’t random-access data structures like lists. Therefore, accessing elements from the middle of a deque is less efficient than doing the same thing on a list. The main takeaway here is that deques aren’t always more efficient than lists.</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="4763e2819a904f16a3a6c1ed5f2d6712"><span data-offset-key="4763e2819a904f16a3a6c1ed5f2d6712:0">Python’s </span><span data-offset-key="4763e2819a904f16a3a6c1ed5f2d6712:1">`deque`</span><span data-offset-key="4763e2819a904f16a3a6c1ed5f2d6712:2"> is optimized for operations on either end of the sequence, so they’re consistently better than lists in this regard. On the other hand, lists are better for random-access and fixed-length operations. Here are some of the differences between deques and lists in terms of performance:</span></span></span>

<table><colgroup><col style="width: 33%" /><col style="width: 33%" /><col style="width: 33%" /></colgroup><tbody><tr class="odd"><td style="text-align: left;"><p><span class="text-4505230f--UIH400-4e41e82a--textContentFamily-49a318e1"><span data-key="8e45379f2a824409ba1e758966708148"><span data-offset-key="8e45379f2a824409ba1e758966708148:0">Operation</span></span></span></p></td><td style="text-align: left;"><p><span class="text-4505230f--UIH400-4e41e82a--textContentFamily-49a318e1"><span data-key="f7b2ac7ac44a4cab82eb9c3ca76558bd"><span data-offset-key="f7b2ac7ac44a4cab82eb9c3ca76558bd:0"><code class="code-0458e21e" spellcheck="false" data-slate-leaf="true">deque</code></span></span></span></p></td><td style="text-align: left;"><p><span class="text-4505230f--UIH400-4e41e82a--textContentFamily-49a318e1"><span data-key="497c1683e22b44b595fc4369cdb6e75b"><span data-offset-key="497c1683e22b44b595fc4369cdb6e75b:0"><code class="code-0458e21e" spellcheck="false" data-slate-leaf="true">list</code></span></span></span></p></td></tr><tr class="even"><td style="text-align: left;"><p><span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="b953a0779c0445ffb51df50d573afd73"><span data-offset-key="b953a0779c0445ffb51df50d573afd73:0">Accessing arbitrary items through indexing</span></span></span></p></td><td style="text-align: left;"><p><span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="a0e06361298d40a8a78486d3f680a9f2"><span data-offset-key="a0e06361298d40a8a78486d3f680a9f2:0"><em>O</em></span><span data-offset-key="a0e06361298d40a8a78486d3f680a9f2:1">(</span><span data-offset-key="a0e06361298d40a8a78486d3f680a9f2:2"><em>n</em></span><span data-offset-key="a0e06361298d40a8a78486d3f680a9f2:3">)</span></span></span></p></td><td style="text-align: left;"><p><span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="f26233ed923741f0a5da7555611546fb"><span data-offset-key="f26233ed923741f0a5da7555611546fb:0"><em>O</em></span><span data-offset-key="f26233ed923741f0a5da7555611546fb:1">(1)</span></span></span></p></td></tr><tr class="odd"><td style="text-align: left;"><p><span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="8b23a3ee57b6410f956bb34f2a9b0ebb"><span data-offset-key="8b23a3ee57b6410f956bb34f2a9b0ebb:0">Popping and appending items on the left end</span></span></span></p></td><td style="text-align: left;"><p><span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="b20e303509d143fa8925dd94383e0755"><span data-offset-key="b20e303509d143fa8925dd94383e0755:0"><em>O</em></span><span data-offset-key="b20e303509d143fa8925dd94383e0755:1">(1)</span></span></span></p></td><td style="text-align: left;"><p><span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="1ac5bb4d419842c591f5691b6ef08e8a"><span data-offset-key="1ac5bb4d419842c591f5691b6ef08e8a:0"><em>O</em></span><span data-offset-key="1ac5bb4d419842c591f5691b6ef08e8a:1">(</span><span data-offset-key="1ac5bb4d419842c591f5691b6ef08e8a:2"><em>n</em></span><span data-offset-key="1ac5bb4d419842c591f5691b6ef08e8a:3">)</span></span></span></p></td></tr><tr class="even"><td style="text-align: left;"><p><span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="b2d8e7efd77b4db4808af8bd712b732e"><span data-offset-key="b2d8e7efd77b4db4808af8bd712b732e:0">Popping and appending items on the right end</span></span></span></p></td><td style="text-align: left;"><p><span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="3f159d5d2b0d495c96498ca6ce0e4fe7"><span data-offset-key="3f159d5d2b0d495c96498ca6ce0e4fe7:0"><em>O</em></span><span data-offset-key="3f159d5d2b0d495c96498ca6ce0e4fe7:1">(1)</span></span></span></p></td><td style="text-align: left;"><p><span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="f8f1a86f391f4e52957809a501f97b15"><span data-offset-key="f8f1a86f391f4e52957809a501f97b15:0"><em>O</em></span><span data-offset-key="f8f1a86f391f4e52957809a501f97b15:1">(1) + reallocation</span></span></span></p></td></tr><tr class="odd"><td style="text-align: left;"><p><span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="67abbc9ff5db49078247bfab62c9b854"><span data-offset-key="67abbc9ff5db49078247bfab62c9b854:0">Inserting and deleting items in the middle</span></span></span></p></td><td style="text-align: left;"><p><span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="aafb179b5b47431299d6d1fc5e851b47"><span data-offset-key="aafb179b5b47431299d6d1fc5e851b47:0"><em>O</em></span><span data-offset-key="aafb179b5b47431299d6d1fc5e851b47:1">(</span><span data-offset-key="aafb179b5b47431299d6d1fc5e851b47:2"><em>n</em></span><span data-offset-key="aafb179b5b47431299d6d1fc5e851b47:3">)</span></span></span></p></td><td style="text-align: left;"><p><span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="bbb86aa082984709aece0ceadf7d3ad7"><span data-offset-key="bbb86aa082984709aece0ceadf7d3ad7:0"><em>O</em></span><span data-offset-key="bbb86aa082984709aece0ceadf7d3ad7:1">(</span><span data-offset-key="bbb86aa082984709aece0ceadf7d3ad7:2"><em>n</em></span><span data-offset-key="bbb86aa082984709aece0ceadf7d3ad7:3">)</span></span></span></p></td></tr></tbody></table>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="ab99480e460843aaa844f3f7fc847cf0"><span data-offset-key="ab99480e460843aaa844f3f7fc847cf0:0">In the case of lists, </span><span data-offset-key="ab99480e460843aaa844f3f7fc847cf0:1">`.append()`</span><span data-offset-key="ab99480e460843aaa844f3f7fc847cf0:2"> has amortized performance affected by memory reallocation when the interpreter needs to grow the list to accept new items. This operation requires copying all the current items to the new memory location, which significantly affects the performance.</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="f202fd792e1d43d98139ce42ca835130"><span data-offset-key="f202fd792e1d43d98139ce42ca835130:0">This summary can help you choose the appropriate data type for the problem at hand. However, make sure to profile your code before switching from lists to deques. Both of them have their performance strengths.</span></span><a href="https://srv.realpython.net/click/67002144333/?c=56207115366&amp;p=58946116052&amp;r=10842" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="034df08073de470db36d119c32041376"><span data-offset-key="034df08073de470db36d119c32041376:0"><span data-slate-zero-width="z">​</span></span></span><span data-slate-void="true" data-key="c81157c149d2400ab06b97d6cb64bae6"><span><span class="reset-3c756112--frameInlineVoid-73b6a96b" data-key="c81157c149d2400ab06b97d6cb64bae6"><img src="https://img.realpython.net/e822f46aa4962c3565f257bb0c4679a8" class="image-67b14f24--image-54d049be" /></span></span></span><span data-key="8d0988d24d6746439487f078851e9fda"><span data-offset-key="8d0988d24d6746439487f078851e9fda:0"><span data-slate-zero-width="z">​</span></span></span></a><span data-key="8a8c3c2645d94fd0a0283821579da6ed"><span data-offset-key="8a8c3c2645d94fd0a0283821579da6ed:0"><span data-slate-zero-width="z">​</span></span></span><a href="https://realpython.com/account/join/" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="3ca691251cdb4f07894346f1fd272a37"><span data-offset-key="3ca691251cdb4f07894346f1fd272a37:0"> Remove ads</span></span></a><span data-key="ec69193ee0a54e2db6aea938b69f7b61"><span data-offset-key="ec69193ee0a54e2db6aea938b69f7b61:0"><span data-slate-zero-width="z">​</span></span></span></span>

<span class="text-4505230f--HeadingH600-23f228db--textContentFamily-49a318e1"><span data-key="79e4dff7fc2c41c092a63753543d5b1a"><span data-offset-key="79e4dff7fc2c41c092a63753543d5b1a:0">Building Efficient Queues With </span><span data-offset-key="79e4dff7fc2c41c092a63753543d5b1a:1">`deque`</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="99bb351c51624cabac788d1bbde7814a"><span data-offset-key="99bb351c51624cabac788d1bbde7814a:0">As you already learned, </span><span data-offset-key="99bb351c51624cabac788d1bbde7814a:1">`deque`</span><span data-offset-key="99bb351c51624cabac788d1bbde7814a:2"> is implemented as a double-ended queue that provides a generalization of </span><span data-offset-key="99bb351c51624cabac788d1bbde7814a:3">**stacks**</span><span data-offset-key="99bb351c51624cabac788d1bbde7814a:4"> and </span><span data-offset-key="99bb351c51624cabac788d1bbde7814a:5">**queues**</span><span data-offset-key="99bb351c51624cabac788d1bbde7814a:6">. In this section, you’ll learn how to use </span><span data-offset-key="99bb351c51624cabac788d1bbde7814a:7">`deque`</span><span data-offset-key="99bb351c51624cabac788d1bbde7814a:8"> for implementing your own queue </span></span><a href="https://en.wikipedia.org/wiki/Abstract_data_type" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="2e396419d7c4455ea24911468cab7865"><span data-offset-key="2e396419d7c4455ea24911468cab7865:0">abstract data types (ADT)</span></span></a><span data-key="bb9c8e6a1e9d410f8f1a2da491e7da5e"><span data-offset-key="bb9c8e6a1e9d410f8f1a2da491e7da5e:0"> at a low level in an elegant, efficient, and Pythonic way.</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="29ac9984ba294a8bafba53bb50849673"><span data-offset-key="29ac9984ba294a8bafba53bb50849673:0">**Note:**</span><span data-offset-key="29ac9984ba294a8bafba53bb50849673:1"> In the Python standard library, you’ll find </span></span><a href="https://docs.python.org/3/library/queue.html#module-queue" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="ebaec13cfb2c47a1ae5f88a36b9280d8"><span data-offset-key="ebaec13cfb2c47a1ae5f88a36b9280d8:0"><code class="code-0458e21e" spellcheck="false" data-slate-leaf="true">queue</code></span></span></a><span data-key="218ed711c21b432284a957b055575626"><span data-offset-key="218ed711c21b432284a957b055575626:0">. This module implements multi-producer, multi-consumer queues that allow you to exchange information between multiple threads safely.</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="0510b0b27f5e4e4eb0859f8a06e748f8"><span data-offset-key="0510b0b27f5e4e4eb0859f8a06e748f8:0">If you’re working with queues, then favor using those high-level abstractions over </span><span data-offset-key="0510b0b27f5e4e4eb0859f8a06e748f8:1">`deque`</span><span data-offset-key="0510b0b27f5e4e4eb0859f8a06e748f8:2"> unless you’re implementing your own data structure.</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="1bb3eacc38054aa89106cf40aae3ee69"><span data-offset-key="1bb3eacc38054aa89106cf40aae3ee69:0">Queues are </span></span><a href="https://en.wikipedia.org/wiki/Collection_(abstract_data_type)" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="601892c6d74746f7a44962bf502cee78"><span data-offset-key="601892c6d74746f7a44962bf502cee78:0">collections</span></span></a><span data-key="2781507bf4ac48f688bcd9cea761c46d"><span data-offset-key="2781507bf4ac48f688bcd9cea761c46d:0"> of items. You can modify queues by adding items at one end and removing items from the opposite end.</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="94171a5ca5c64998a41e44e0b7a1597a"><span data-offset-key="94171a5ca5c64998a41e44e0b7a1597a:0">Queues manage their items in a </span><span data-offset-key="94171a5ca5c64998a41e44e0b7a1597a:1">**First-In/First-Out**</span><span data-offset-key="94171a5ca5c64998a41e44e0b7a1597a:2"> (</span></span><a href="https://en.wikipedia.org/wiki/FIFO_(computing_and_electronics)" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="365e6829bdd64c7b876edfb938bba3f5"><span data-offset-key="365e6829bdd64c7b876edfb938bba3f5:0">FIFO</span></span></a><span data-key="2e2005d76f424b75a59289176a786329"><span data-offset-key="2e2005d76f424b75a59289176a786329:0">) fashion. They work as a pipe where you push in new items at one end of the pipe and pop old items out from the other end. Adding an item to one end of a queue is known as an </span><span data-offset-key="2e2005d76f424b75a59289176a786329:1">**enqueue**</span><span data-offset-key="2e2005d76f424b75a59289176a786329:2"> operation. Removing an item from the other end is called </span><span data-offset-key="2e2005d76f424b75a59289176a786329:3">**dequeue**</span><span data-offset-key="2e2005d76f424b75a59289176a786329:4">.</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="94d4197e9d1749ed9a95049627109011"><span data-offset-key="94d4197e9d1749ed9a95049627109011:0">To better understand queues, take your favorite restaurant as an example. The restaurant has a queue of people waiting for a table to order their food. Typically, the last person to arrive will stand at the end of the queue. The person at the beginning of the queue will leave it as soon as a table is available.</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="0d65f1b988ef41f5998ea0b02b43f1ce"><span data-offset-key="0d65f1b988ef41f5998ea0b02b43f1ce:0">Here’s how you can emulate the process using a bare-bones </span><span data-offset-key="0d65f1b988ef41f5998ea0b02b43f1ce:1">`deque`</span><span data-offset-key="0d65f1b988ef41f5998ea0b02b43f1ce:2"> object:&gt;&gt;&gt;</span></span></span>

    >>> from collections import deque​>>> customers = deque()​>>> # People arriving>>> customers.append("Jane")>>> customers.append("John")>>> customers.append("Linda")​>>> customersdeque(['Jane', 'John', 'Linda'])​>>> # People getting tables>>> customers.popleft()'Jane'>>> customers.popleft()'John'>>> customers.popleft()'Linda'​>>> # No people in the queue>>> customers.popleft()Traceback (most recent call last):  File "<stdin>", line 1, in <module>IndexError: pop from an empty deque

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="28085ba457894c04899867d791a13dc0"><span data-offset-key="28085ba457894c04899867d791a13dc0:0">Here, you first create an empty </span><span data-offset-key="28085ba457894c04899867d791a13dc0:1">`deque`</span><span data-offset-key="28085ba457894c04899867d791a13dc0:2"> object to represent the queue of people arriving at the restaurant. To enqueue a person, you use </span></span><a href="https://docs.python.org/3/library/collections.html#collections.deque.append" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="50a47188caf448969485a2786c43f6ce"><span data-offset-key="50a47188caf448969485a2786c43f6ce:0"><code class="code-0458e21e" spellcheck="false" data-slate-leaf="true">.append()</code></span></span></a><span data-key="5666472639df42f5af67cc47cfdcbd7a"><span data-offset-key="5666472639df42f5af67cc47cfdcbd7a:0">, which adds individual items to the right end. To dequeue a person, you use </span></span><a href="https://docs.python.org/3/library/collections.html#collections.deque.popleft" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="68a071fd4e714db3b62da9aa73124c97"><span data-offset-key="68a071fd4e714db3b62da9aa73124c97:0"><code class="code-0458e21e" spellcheck="false" data-slate-leaf="true">.popleft()</code></span></span></a><span data-key="f1509c1525bf40e1aa79e54994d63c4e"><span data-offset-key="f1509c1525bf40e1aa79e54994d63c4e:0">, which removes and returns individual items on the left end of a deque.</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="fd769deff4b647b8901e39d0bd6e6934"><span data-offset-key="fd769deff4b647b8901e39d0bd6e6934:0">Cool! Your queue simulation works! However, since </span><span data-offset-key="fd769deff4b647b8901e39d0bd6e6934:1">`deque`</span><span data-offset-key="fd769deff4b647b8901e39d0bd6e6934:2"> is a generalization, its </span></span><a href="https://en.wikipedia.org/wiki/API" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="2ef66050209b4e9cb157e1f945bdfbcc"><span data-offset-key="2ef66050209b4e9cb157e1f945bdfbcc:0">API</span></span></a><span data-key="72317374af5c49ecacee36897cc19c1b"><span data-offset-key="72317374af5c49ecacee36897cc19c1b:0"> doesn’t match the typical queue API. For example, instead of </span><span data-offset-key="72317374af5c49ecacee36897cc19c1b:1">`.enqueue()`</span><span data-offset-key="72317374af5c49ecacee36897cc19c1b:2">, you have </span><span data-offset-key="72317374af5c49ecacee36897cc19c1b:3">`.append()`</span><span data-offset-key="72317374af5c49ecacee36897cc19c1b:4">. You also have </span><span data-offset-key="72317374af5c49ecacee36897cc19c1b:5">`.popleft()`</span><span data-offset-key="72317374af5c49ecacee36897cc19c1b:6"> instead of </span><span data-offset-key="72317374af5c49ecacee36897cc19c1b:7">`.dequeue()`</span><span data-offset-key="72317374af5c49ecacee36897cc19c1b:8">. Additionally, </span><span data-offset-key="72317374af5c49ecacee36897cc19c1b:9">`deque`</span><span data-offset-key="72317374af5c49ecacee36897cc19c1b:10"> provides several other operations that might not fit your specific needs.</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="ff9d88ff61734252a9b5e3b254411d1b"><span data-offset-key="ff9d88ff61734252a9b5e3b254411d1b:0">The good news is that you can create custom queue classes with the functionality you need and nothing else. To do this, you can internally use a deque to store the data and provide the desired functionality in your custom queues. You can think of it as an implementation of the </span></span><a href="https://sourcemaking.com/design_patterns/adapter" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="a91512bb98ff4665ae7cfafccef64658"><span data-offset-key="a91512bb98ff4665ae7cfafccef64658:0">adapter design pattern</span></span></a><span data-key="af0ee41f03ae4c6a99b782e3e97da81d"><span data-offset-key="af0ee41f03ae4c6a99b782e3e97da81d:0">, in which you convert the deque’s interface into something that looks more like a queue interface.</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="0f7cc0667c524de896f1e1def657df4d"><span data-offset-key="0f7cc0667c524de896f1e1def657df4d:0">For example, say you need a custom queue abstract data type that provides only the following features:</span></span></span>

-   <span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="8f674d776fa940c6942dfaf4226b152f"><span data-offset-key="8f674d776fa940c6942dfaf4226b152f:0">Enqueuing items</span></span></span>

-   <span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="051fcf6f61674e359a65c8552274d605"><span data-offset-key="051fcf6f61674e359a65c8552274d605:0">Dequeuing items</span></span></span>

-   <span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="2cbe0dfc3c6f435d91921f1d2ca146e5"><span data-offset-key="2cbe0dfc3c6f435d91921f1d2ca146e5:0">Returning the length of the queue</span></span></span>

-   <span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="6cefe5aa8e83408699751838c2932c2e"><span data-offset-key="6cefe5aa8e83408699751838c2932c2e:0">Supporting membership tests</span></span></span>

-   <span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="d4d04d95b9a54957954a7a328a6a76cd"><span data-offset-key="d4d04d95b9a54957954a7a328a6a76cd:0">Supporting normal and reverse iteration</span></span></span>

-   <span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="25f3d8bbad9f4f318b5ff448e62821d7"><span data-offset-key="25f3d8bbad9f4f318b5ff448e62821d7:0">Providing a user-friendly string representation</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="0acb23ef874842018479c02e80fb26b1"><span data-offset-key="0acb23ef874842018479c02e80fb26b1:0">In this case, you can write a </span><span data-offset-key="0acb23ef874842018479c02e80fb26b1:1">`Queue`</span><span data-offset-key="0acb23ef874842018479c02e80fb26b1:2"> class that looks like the following:</span></span></span>

    # custom_queue.py​from collections import deque​class Queue:    def __init__(self):        self._items = deque()​    def enqueue(self, item):        self._items.append(item)​    def dequeue(self):        try:            return self._items.popleft()        except IndexError:            raise IndexError("dequeue from an empty queue") from None​    def __len__(self):        return len(self._items)​    def __contains__(self, item):        return item in self._items​    def __iter__(self):        yield from self._items​    def __reversed__(self):        yield from reversed(self._items)​    def __repr__(self):        return f"Queue({list(self._items)})"

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="7dccdcabe02c4f1586c9c9e1a80b53af"><span data-offset-key="7dccdcabe02c4f1586c9c9e1a80b53af:0">Here, </span><span data-offset-key="7dccdcabe02c4f1586c9c9e1a80b53af:1">`._items`</span><span data-offset-key="7dccdcabe02c4f1586c9c9e1a80b53af:2"> holds a </span><span data-offset-key="7dccdcabe02c4f1586c9c9e1a80b53af:3">`deque`</span><span data-offset-key="7dccdcabe02c4f1586c9c9e1a80b53af:4"> object that allows you to store and manipulate the items in the queue. </span><span data-offset-key="7dccdcabe02c4f1586c9c9e1a80b53af:5">`Queue`</span><span data-offset-key="7dccdcabe02c4f1586c9c9e1a80b53af:6"> implements </span><span data-offset-key="7dccdcabe02c4f1586c9c9e1a80b53af:7">`.enqueue()`</span><span data-offset-key="7dccdcabe02c4f1586c9c9e1a80b53af:8"> using </span><span data-offset-key="7dccdcabe02c4f1586c9c9e1a80b53af:9">`deque.append()`</span><span data-offset-key="7dccdcabe02c4f1586c9c9e1a80b53af:10"> to add items to the end of the queue. It also implements </span><span data-offset-key="7dccdcabe02c4f1586c9c9e1a80b53af:11">`.dequeue()`</span><span data-offset-key="7dccdcabe02c4f1586c9c9e1a80b53af:12"> with </span><span data-offset-key="7dccdcabe02c4f1586c9c9e1a80b53af:13">`deque.popleft()`</span><span data-offset-key="7dccdcabe02c4f1586c9c9e1a80b53af:14"> to efficiently remove items from the beginning of the queue.</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="1de0612ea3c3420da1f97e0bc6781571"><span data-offset-key="1de0612ea3c3420da1f97e0bc6781571:0">The </span></span><a href="https://docs.python.org/3/glossary.html#term-special-method" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="9effb9be49bc450aa59d4a9d7426bd6c"><span data-offset-key="9effb9be49bc450aa59d4a9d7426bd6c:0">special methods</span></span></a><span data-key="dbf4187b1e174a5f903d95d4e1bea116"><span data-offset-key="dbf4187b1e174a5f903d95d4e1bea116:0"> support the following features:</span></span></span>

<table><colgroup><col style="width: 50%" /><col style="width: 50%" /></colgroup><tbody><tr class="odd"><td style="text-align: left;"><p><span class="text-4505230f--UIH400-4e41e82a--textContentFamily-49a318e1"><span data-key="9c5a65a6cccc4e35bbda2f4a81b34099"><span data-offset-key="9c5a65a6cccc4e35bbda2f4a81b34099:0">Method</span></span></span></p></td><td style="text-align: left;"><p><span class="text-4505230f--UIH400-4e41e82a--textContentFamily-49a318e1"><span data-key="869dc9e1b69c4a30807b666be602289d"><span data-offset-key="869dc9e1b69c4a30807b666be602289d:0">Support</span></span></span></p></td></tr><tr class="even"><td style="text-align: left;"><p><span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="9486ddb0ffdd4b58ba371d950cd13788"><span data-offset-key="9486ddb0ffdd4b58ba371d950cd13788:0"><span data-slate-zero-width="z">​</span></span></span><a href="https://docs.python.org/3/reference/datamodel.html#object.__len__" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="a439666685bc4002818d1d09a381d36a"><span data-offset-key="a439666685bc4002818d1d09a381d36a:0"><code class="code-0458e21e" spellcheck="false" data-slate-leaf="true">.__len__()</code></span></span></a><span data-key="c75eadb3c9c240bfb5f32e1bd96d6302"><span data-offset-key="c75eadb3c9c240bfb5f32e1bd96d6302:0"><span data-slate-zero-width="z">​</span></span></span></span></p></td><td style="text-align: left;"><p><span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="34849019be6d4fda89f3348060e34d5e"><span data-offset-key="34849019be6d4fda89f3348060e34d5e:0">Length with </span><span data-offset-key="34849019be6d4fda89f3348060e34d5e:1"><code class="code-0458e21e" spellcheck="false" data-slate-leaf="true">len()</code></span></span></span></p></td></tr><tr class="odd"><td style="text-align: left;"><p><span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="7ee6505e35284255ada284cbe3971a0b"><span data-offset-key="7ee6505e35284255ada284cbe3971a0b:0"><span data-slate-zero-width="z">​</span></span></span><a href="https://docs.python.org/3/reference/datamodel.html#object.__contains__" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="662c71b4b34e464ea89621862123413d"><span data-offset-key="662c71b4b34e464ea89621862123413d:0"><code class="code-0458e21e" spellcheck="false" data-slate-leaf="true">.__contains__()</code></span></span></a><span data-key="a7aa8e46aac846a78538645c77c4cd88"><span data-offset-key="a7aa8e46aac846a78538645c77c4cd88:0"><span data-slate-zero-width="z">​</span></span></span></span></p></td><td style="text-align: left;"><p><span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="01afec8ced0147ac84ab8ce97bcc3e0a"><span data-offset-key="01afec8ced0147ac84ab8ce97bcc3e0a:0">Membership tests with </span><span data-offset-key="01afec8ced0147ac84ab8ce97bcc3e0a:1"><code class="code-0458e21e" spellcheck="false" data-slate-leaf="true">in</code></span></span></span></p></td></tr><tr class="even"><td style="text-align: left;"><p><span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="c478be04d9fa4d4c87ae37965b0118e0"><span data-offset-key="c478be04d9fa4d4c87ae37965b0118e0:0"><span data-slate-zero-width="z">​</span></span></span><a href="https://docs.python.org/3/reference/datamodel.html#object.__iter__" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="f8dcdf95b7d349e1b5069e2fed337774"><span data-offset-key="f8dcdf95b7d349e1b5069e2fed337774:0"><code class="code-0458e21e" spellcheck="false" data-slate-leaf="true">.__iter__()</code></span></span></a><span data-key="304d0f861fc64e6e9cfad174acceea14"><span data-offset-key="304d0f861fc64e6e9cfad174acceea14:0"><span data-slate-zero-width="z">​</span></span></span></span></p></td><td style="text-align: left;"><p><span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="458398120559455ba1f8e4e988fa7e90"><span data-offset-key="458398120559455ba1f8e4e988fa7e90:0">Normal iteration</span></span></span></p></td></tr><tr class="odd"><td style="text-align: left;"><p><span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="9f4411d953dc4195b8458e96051530fc"><span data-offset-key="9f4411d953dc4195b8458e96051530fc:0"><span data-slate-zero-width="z">​</span></span></span><a href="https://docs.python.org/3/reference/datamodel.html#object.__reversed__" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="74584abe39d54c739293b2923c8aa35a"><span data-offset-key="74584abe39d54c739293b2923c8aa35a:0"><code class="code-0458e21e" spellcheck="false" data-slate-leaf="true">.__reversed__()</code></span></span></a><span data-key="4e60707cd2a847f7a599fba55c5e0c72"><span data-offset-key="4e60707cd2a847f7a599fba55c5e0c72:0"><span data-slate-zero-width="z">​</span></span></span></span></p></td><td style="text-align: left;"><p><span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="4994580390f647c9a820d4d4b838236a"><span data-offset-key="4994580390f647c9a820d4d4b838236a:0">Reverse iteration</span></span></span></p></td></tr><tr class="even"><td style="text-align: left;"><p><span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="645d814ab72742809d234a46f64682f9"><span data-offset-key="645d814ab72742809d234a46f64682f9:0"><span data-slate-zero-width="z">​</span></span></span><a href="https://docs.python.org/3/reference/datamodel.html#object.__repr__" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="09ddc40be3a54c40bdfbbb5039bfabb6"><span data-offset-key="09ddc40be3a54c40bdfbbb5039bfabb6:0"><code class="code-0458e21e" spellcheck="false" data-slate-leaf="true">.__repr__()</code></span></span></a><span data-key="f7987c80a8594f2fb9a1e4298e689f0b"><span data-offset-key="f7987c80a8594f2fb9a1e4298e689f0b:0"><span data-slate-zero-width="z">​</span></span></span></span></p></td><td style="text-align: left;"><p><span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="6f249084aa4a4cd092546acc8de344ca"><span data-offset-key="6f249084aa4a4cd092546acc8de344ca:0">String representation</span></span></span></p></td></tr></tbody></table>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="01ae1826d8b746f99c64677537f780e5"><span data-offset-key="01ae1826d8b746f99c64677537f780e5:0">Ideally, </span><span data-offset-key="01ae1826d8b746f99c64677537f780e5:1">`.__repr__()`</span><span data-offset-key="01ae1826d8b746f99c64677537f780e5:2"> should return a string representing a valid Python expression. This expression will allow you to recreate the object unambiguously with the same value.</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="1447773951cf4fe8b0c2b0d6a89b786f"><span data-offset-key="1447773951cf4fe8b0c2b0d6a89b786f:0">However, in the example above, the intent is to use the method’s </span></span><a href="https://realpython.com/python-return-statement/" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="6ee60fb4786a4de2810fe832f3c6aacc"><span data-offset-key="6ee60fb4786a4de2810fe832f3c6aacc:0">return</span></span></a><span data-key="2de06f2b53054f89b40a813ec278a3d2"><span data-offset-key="2de06f2b53054f89b40a813ec278a3d2:0"> value to gracefully display the object on the </span></span><a href="https://realpython.com/interacting-with-python/" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="d98cf47ef2a9450ab969232273c36f25"><span data-offset-key="d98cf47ef2a9450ab969232273c36f25:0">interactive shell</span></span></a><span data-key="1a5849ed3e874f78a5e31645b6dd2667"><span data-offset-key="1a5849ed3e874f78a5e31645b6dd2667:0">. You can make it possible to build </span><span data-offset-key="1a5849ed3e874f78a5e31645b6dd2667:1">`Queue`</span><span data-offset-key="1a5849ed3e874f78a5e31645b6dd2667:2"> instances from this specific string representation by accepting an initialization iterable as an argument to </span><span data-offset-key="1a5849ed3e874f78a5e31645b6dd2667:3">`.__init__()`</span><span data-offset-key="1a5849ed3e874f78a5e31645b6dd2667:4"> and building instances from it.</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="afb1de2207cd40378222bd12a23787a1"><span data-offset-key="afb1de2207cd40378222bd12a23787a1:0">With these final additions, your </span><span data-offset-key="afb1de2207cd40378222bd12a23787a1:1">`Queue`</span><span data-offset-key="afb1de2207cd40378222bd12a23787a1:2"> class is complete. To use this class in your code, you can do something like the following:&gt;&gt;&gt;</span></span></span>

    >>> from custom_queue import Queue​>>> numbers = Queue()>>> numbersQueue([])​>>> # Enqueue items>>> for number in range(1, 5):...     numbers.enqueue(number)...>>> numbersQueue([1, 2, 3, 4])​>>> # Support len()>>> len(numbers)4​>>> # Support membership tests>>> 2 in numbersTrue>>> 10 in numbersFalse​>>> # Normal iteration>>> for number in numbers:...     print(f"Number: {number}")...1234

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="83d441c2032f4b0a99c2b18c6af41026"><span data-offset-key="83d441c2032f4b0a99c2b18c6af41026:0">As an exercise, you can test the remaining features and implement other features, such as supporting equality tests, removing and accessing random items, and more. Go ahead and give it a try!</span></span><a href="https://srv.realpython.net/click/51173158879/?c=3190889540&amp;p=58946116052&amp;r=98172" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="94aac717bcf040d189cd53f9ab600686"><span data-offset-key="94aac717bcf040d189cd53f9ab600686:0"><span data-slate-zero-width="z">​</span></span></span><span data-slate-void="true" data-key="f59af2703fd94fcbbc1ee6661ea89a1e"><span><span class="reset-3c756112--frameInlineVoid-73b6a96b" data-key="f59af2703fd94fcbbc1ee6661ea89a1e"><img src="https://img.realpython.net/8c80de229a52f9edcdfefa85a454bbbe" class="image-67b14f24--image-54d049be" /></span></span></span><span data-key="b80def635219499cb13fe8f759eb1f72"><span data-offset-key="b80def635219499cb13fe8f759eb1f72:0"><span data-slate-zero-width="z">​</span></span></span></a><span data-key="d143ba6670214c96abbf4603998ba91c"><span data-offset-key="d143ba6670214c96abbf4603998ba91c:0"><span data-slate-zero-width="z">​</span></span></span><a href="https://realpython.com/account/join/" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="2a148f817ca147ba8660100e639cf2b2"><span data-offset-key="2a148f817ca147ba8660100e639cf2b2:0"> Remove ads</span></span></a><span data-key="f3d93d779ed64e7ba6626a6cd7444451"><span data-offset-key="f3d93d779ed64e7ba6626a6cd7444451:0"><span data-slate-zero-width="z">​</span></span></span></span>

<span class="text-4505230f--HeadingH600-23f228db--textContentFamily-49a318e1"><span data-key="6cf7bec4e28c4a84a493fba0d5ad039b"><span data-offset-key="6cf7bec4e28c4a84a493fba0d5ad039b:0">Exploring Other Features of </span><span data-offset-key="6cf7bec4e28c4a84a493fba0d5ad039b:1">`deque`</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="4a5517b804b74f7fbc53b507e74ffa69"><span data-offset-key="4a5517b804b74f7fbc53b507e74ffa69:0">In addition to the features you’ve seen so far, </span><span data-offset-key="4a5517b804b74f7fbc53b507e74ffa69:1">`deque`</span><span data-offset-key="4a5517b804b74f7fbc53b507e74ffa69:2"> also provides other methods and attributes specific to their internal design. They add new and useful functionalities to this versatile data type.</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="72ea526bba214fff849a944f02f846a8"><span data-offset-key="72ea526bba214fff849a944f02f846a8:0">In this section, you’ll learn about other methods and attributes that deques provide, how they work, and how to use them in your code.</span></span></span>

### 

<span class="text-4505230f--HeadingH400-686c0942--textContentFamily-49a318e1"><span data-key="3e578444f3b54c68967261fea075756c"><span data-offset-key="3e578444f3b54c68967261fea075756c:0">Limiting the Maximum Number of Items: </span><span data-offset-key="3e578444f3b54c68967261fea075756c:1">`maxlen`</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="230748cf0e50430d8c747dbf1eecd7a0"><span data-offset-key="230748cf0e50430d8c747dbf1eecd7a0:0">One of the most useful features of </span><span data-offset-key="230748cf0e50430d8c747dbf1eecd7a0:1">`deque`</span><span data-offset-key="230748cf0e50430d8c747dbf1eecd7a0:2"> is the possibility to specify the </span><span data-offset-key="230748cf0e50430d8c747dbf1eecd7a0:3">**maximum length**</span><span data-offset-key="230748cf0e50430d8c747dbf1eecd7a0:4"> of a given deque using the </span><span data-offset-key="230748cf0e50430d8c747dbf1eecd7a0:5">`maxlen`</span><span data-offset-key="230748cf0e50430d8c747dbf1eecd7a0:6"> argument when you’re instantiating the class.</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="3d2a9d8b304c4a8387c9b816b8050d5d"><span data-offset-key="3d2a9d8b304c4a8387c9b816b8050d5d:0">If you supply a value to </span><span data-offset-key="3d2a9d8b304c4a8387c9b816b8050d5d:1">`maxlen`</span><span data-offset-key="3d2a9d8b304c4a8387c9b816b8050d5d:2">, then your deque will only store up to </span><span data-offset-key="3d2a9d8b304c4a8387c9b816b8050d5d:3">`maxlen`</span><span data-offset-key="3d2a9d8b304c4a8387c9b816b8050d5d:4"> items. In this case, you have a </span><span data-offset-key="3d2a9d8b304c4a8387c9b816b8050d5d:5">**bounded deque**</span><span data-offset-key="3d2a9d8b304c4a8387c9b816b8050d5d:6">. Once a bounded deque is full with the specified number of items, adding a new item at either end automatically removes and discards the item at the opposite end:&gt;&gt;&gt;</span></span></span>

    >>> from collections import deque​>>> four_numbers = deque([0, 1, 2, 3, 4], maxlen=4) # Discard 0>>> four_numbersdeque([1, 2, 3, 4], maxlen=4)​>>> four_numbers.append(5)  # Automatically remove 1>>> four_numbersdeque([2, 3, 4, 5], maxlen=4)​>>> four_numbers.append(6)  # Automatically remove 2>>> four_numbersdeque([3, 4, 5, 6], maxlen=4)​>>> four_numbers.appendleft(2) # Automatically remove 6>>> four_numbersdeque([2, 3, 4, 5], maxlen=4)​>>> four_numbers.appendleft(1)  # Automatically remove 5>>> four_numbersdeque([1, 2, 3, 4], maxlen=4)​>>> four_numbers.maxlen4

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="f437cc90244e4ae4ac833da9bc28aeb8"><span data-offset-key="f437cc90244e4ae4ac833da9bc28aeb8:0">If the number of items in the input iterable is greater than </span><span data-offset-key="f437cc90244e4ae4ac833da9bc28aeb8:1">`maxlen`</span><span data-offset-key="f437cc90244e4ae4ac833da9bc28aeb8:2">, then </span><span data-offset-key="f437cc90244e4ae4ac833da9bc28aeb8:3">`deque`</span><span data-offset-key="f437cc90244e4ae4ac833da9bc28aeb8:4"> discards the left-most items (</span><span data-offset-key="f437cc90244e4ae4ac833da9bc28aeb8:5">`0`</span><span data-offset-key="f437cc90244e4ae4ac833da9bc28aeb8:6"> in the example). Once the deque is full, appending an item on any end automatically removes the item on the other end.</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="6aebc682077041cdb2776987770ae854"><span data-offset-key="6aebc682077041cdb2776987770ae854:0">Note that if you don’t specify a value to </span><span data-offset-key="6aebc682077041cdb2776987770ae854:1">`maxlen`</span><span data-offset-key="6aebc682077041cdb2776987770ae854:2">, then it defaults to </span></span><a href="https://realpython.com/null-in-python/" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="a07640e321cc4bb8bd38813e815166ad"><span data-offset-key="a07640e321cc4bb8bd38813e815166ad:0"><code class="code-0458e21e" spellcheck="false" data-slate-leaf="true">None</code></span></span></a><span data-key="0023d5dc70924a1eb9d4e266cd2402a1"><span data-offset-key="0023d5dc70924a1eb9d4e266cd2402a1:0">, and the deque can grow to an arbitrary number of items.</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="3b50379585da4993a90f896a3aa3adef"><span data-offset-key="3b50379585da4993a90f896a3aa3adef:0">Having the option to restrict the maximum number of items allows you to use deques for tracking the latest elements in a given sequence of objects or events. For example, you can track the last five transactions in a bank account, the last ten open text files in an editor, the last five pages in a browser, and more.</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="568872e32ecd4a9889793ff4c1323613"><span data-offset-key="568872e32ecd4a9889793ff4c1323613:0">Note that </span><span data-offset-key="568872e32ecd4a9889793ff4c1323613:1">`maxlen`</span><span data-offset-key="568872e32ecd4a9889793ff4c1323613:2"> is available as a read-only attribute in your deques, which allows you to check if the deque is full, like in </span><span data-offset-key="568872e32ecd4a9889793ff4c1323613:3">`deque.maxlen == len(deque)`</span><span data-offset-key="568872e32ecd4a9889793ff4c1323613:4">.</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="4ec48f78aa0c40ef82da39e94c5cb136"><span data-offset-key="4ec48f78aa0c40ef82da39e94c5cb136:0">Finally, you can set </span><span data-offset-key="4ec48f78aa0c40ef82da39e94c5cb136:1">`maxlen`</span><span data-offset-key="4ec48f78aa0c40ef82da39e94c5cb136:2"> to any positive integer number representing the maximum number of items you want to store in a specific deque. If you supply a negative value to </span><span data-offset-key="4ec48f78aa0c40ef82da39e94c5cb136:3">`maxlen`</span><span data-offset-key="4ec48f78aa0c40ef82da39e94c5cb136:4">, then you get a </span><span data-offset-key="4ec48f78aa0c40ef82da39e94c5cb136:5">`ValueError`</span><span data-offset-key="4ec48f78aa0c40ef82da39e94c5cb136:6">.</span></span></span>

### 

<span class="text-4505230f--HeadingH400-686c0942--textContentFamily-49a318e1"><span data-key="3a0349454c0347b584f7e0992a051795"><span data-offset-key="3a0349454c0347b584f7e0992a051795:0">Rotating the Items: </span><span data-offset-key="3a0349454c0347b584f7e0992a051795:1">`.rotate()`</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="62c1e10f66c9466085d9ed63872ef9b9"><span data-offset-key="62c1e10f66c9466085d9ed63872ef9b9:0">Another interesting feature of deques is the possibility to rotate their elements by calling </span></span><a href="https://docs.python.org/3/library/collections.html#collections.deque.rotate" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="8a982c23b91d4f9d868eedcfd26ea48f"><span data-offset-key="8a982c23b91d4f9d868eedcfd26ea48f:0"><code class="code-0458e21e" spellcheck="false" data-slate-leaf="true">.rotate()</code></span></span></a><span data-key="34fd6050fbae41c799b22cabc3ffb384"><span data-offset-key="34fd6050fbae41c799b22cabc3ffb384:0"> on a non-empty deque. This method takes an integer </span><span data-offset-key="34fd6050fbae41c799b22cabc3ffb384:1">`n`</span><span data-offset-key="34fd6050fbae41c799b22cabc3ffb384:2"> as an argument and rotates the items </span><span data-offset-key="34fd6050fbae41c799b22cabc3ffb384:3">`n`</span><span data-offset-key="34fd6050fbae41c799b22cabc3ffb384:4"> steps to the right. In other words, it moves </span><span data-offset-key="34fd6050fbae41c799b22cabc3ffb384:5">`n`</span><span data-offset-key="34fd6050fbae41c799b22cabc3ffb384:6"> items from the right end to the left end in a circular fashion.</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="3c46c89982b84feeb330b8adeb94a2c3"><span data-offset-key="3c46c89982b84feeb330b8adeb94a2c3:0">The default value of </span><span data-offset-key="3c46c89982b84feeb330b8adeb94a2c3:1">`n`</span><span data-offset-key="3c46c89982b84feeb330b8adeb94a2c3:2"> is </span><span data-offset-key="3c46c89982b84feeb330b8adeb94a2c3:3">`1`</span><span data-offset-key="3c46c89982b84feeb330b8adeb94a2c3:4">. If you provide a negative value to </span><span data-offset-key="3c46c89982b84feeb330b8adeb94a2c3:5">`n`</span><span data-offset-key="3c46c89982b84feeb330b8adeb94a2c3:6">, then the rotation is to the left:&gt;&gt;&gt;</span></span></span>

    >>> from collections import deque​>>> ordinals = deque(["first", "second", "third"])​>>> # Rotate items to the right>>> ordinals.rotate()>>> ordinalsdeque(['third', 'first', 'second'])​>>> ordinals.rotate(2)>>> ordinalsdeque(['first', 'second', 'third'])​>>> # Rotate items to the left>>> ordinals.rotate(-2)>>> ordinalsdeque(['third', 'first', 'second'])​>>> ordinals.rotate(-1)>>> ordinalsdeque(['first', 'second', 'third'])

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="caee2d48075047ad95bbbb9d72631028"><span data-offset-key="caee2d48075047ad95bbbb9d72631028:0">In these examples, you rotate </span><span data-offset-key="caee2d48075047ad95bbbb9d72631028:1">`ordinals`</span><span data-offset-key="caee2d48075047ad95bbbb9d72631028:2"> several times using </span><span data-offset-key="caee2d48075047ad95bbbb9d72631028:3">`.rotate()`</span><span data-offset-key="caee2d48075047ad95bbbb9d72631028:4"> with different values of </span><span data-offset-key="caee2d48075047ad95bbbb9d72631028:5">`n`</span><span data-offset-key="caee2d48075047ad95bbbb9d72631028:6">. If you call </span><span data-offset-key="caee2d48075047ad95bbbb9d72631028:7">`.rotate()`</span><span data-offset-key="caee2d48075047ad95bbbb9d72631028:8"> without an argument, then it relies on the default value of </span><span data-offset-key="caee2d48075047ad95bbbb9d72631028:9">`n`</span><span data-offset-key="caee2d48075047ad95bbbb9d72631028:10"> and rotates the deque </span><span data-offset-key="caee2d48075047ad95bbbb9d72631028:11">`1`</span><span data-offset-key="caee2d48075047ad95bbbb9d72631028:12"> position to the right. Calling the method with a negative </span><span data-offset-key="caee2d48075047ad95bbbb9d72631028:13">`n`</span><span data-offset-key="caee2d48075047ad95bbbb9d72631028:14"> allows you to rotate the items to the left.</span></span></span>

### 

<span class="text-4505230f--HeadingH400-686c0942--textContentFamily-49a318e1"><span data-key="c809de92d1f9430bb4b301fece337c80"><span data-offset-key="c809de92d1f9430bb4b301fece337c80:0">Adding Several Items at Once: </span><span data-offset-key="c809de92d1f9430bb4b301fece337c80:1">`.extendleft()`</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="821062959dfa41038879e2f794a4eb7a"><span data-offset-key="821062959dfa41038879e2f794a4eb7a:0">Like regular lists, deques provide an </span></span><a href="https://docs.python.org/3/library/collections.html#collections.deque.extend" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="113cb84af3924e87a3e89594697224a8"><span data-offset-key="113cb84af3924e87a3e89594697224a8:0"><code class="code-0458e21e" spellcheck="false" data-slate-leaf="true">.extend()</code></span></span></a><span data-key="281ee0acbdd34b139cddd1bcac852f2f"><span data-offset-key="281ee0acbdd34b139cddd1bcac852f2f:0"> method, which allows you to add several items to the right end of a deque using an </span><span data-offset-key="281ee0acbdd34b139cddd1bcac852f2f:1">`iterable`</span><span data-offset-key="281ee0acbdd34b139cddd1bcac852f2f:2"> as an argument. Additionally, deques have a method called </span></span><a href="https://docs.python.org/3/library/collections.html#collections.deque.extendleft" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="d2514c15f3e940209c36c5e2aec54309"><span data-offset-key="d2514c15f3e940209c36c5e2aec54309:0"><code class="code-0458e21e" spellcheck="false" data-slate-leaf="true">extendleft()</code></span></span></a><span data-key="5a0ab04e70c041ed81506466ea0d14f3"><span data-offset-key="5a0ab04e70c041ed81506466ea0d14f3:0">, which takes an </span><span data-offset-key="5a0ab04e70c041ed81506466ea0d14f3:1">`iterable`</span><span data-offset-key="5a0ab04e70c041ed81506466ea0d14f3:2"> as an argument and adds its items to the left end of the target deque in one go:&gt;&gt;&gt;</span></span></span>

    >>> from collections import deque​>>> numbers = deque([1, 2])​>>> # Extend to the right>>> numbers.extend([3, 4, 5])>>> numbersdeque([1, 2, 3, 4, 5])​>>> # Extend to the left>>> numbers.extendleft([-1, -2, -3, -4, -5])>>> numbersdeque([-5, -4, -3, -2, -1, 1, 2, 3, 4, 5])

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="688214ab673a45c394397a28adf855ac"><span data-offset-key="688214ab673a45c394397a28adf855ac:0">Calling </span><span data-offset-key="688214ab673a45c394397a28adf855ac:1">`.extendleft()`</span><span data-offset-key="688214ab673a45c394397a28adf855ac:2"> with an </span><span data-offset-key="688214ab673a45c394397a28adf855ac:3">`iterable`</span><span data-offset-key="688214ab673a45c394397a28adf855ac:4"> extends the target deque to the left. Internally, </span><span data-offset-key="688214ab673a45c394397a28adf855ac:5">`.extendleft()`</span><span data-offset-key="688214ab673a45c394397a28adf855ac:6"> performs a series of individual </span><span data-offset-key="688214ab673a45c394397a28adf855ac:7">`.appendleft()`</span><span data-offset-key="688214ab673a45c394397a28adf855ac:8"> operations that process the input iterable from left to right. This ends up adding the items in reverse order to the left end of the target deque.</span></span><a href="https://srv.realpython.net/click/53616533979/?c=62098619220&amp;p=58946116052&amp;r=67323" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="31556ed48f5f4bc69fd2875fcd69ce16"><span data-offset-key="31556ed48f5f4bc69fd2875fcd69ce16:0"><span data-slate-zero-width="z">​</span></span></span><span data-slate-void="true" data-key="f4f81897b4464460bf0c5b256eda27d3"><span><span class="reset-3c756112--frameInlineVoid-73b6a96b" data-key="f4f81897b4464460bf0c5b256eda27d3"><img src="https://img.realpython.net/babd32c4a9b6cf2453889710f58b5914" class="image-67b14f24--image-54d049be" /></span></span></span><span data-key="fa502c95b5614e05ae593be04e1896ae"><span data-offset-key="fa502c95b5614e05ae593be04e1896ae:0"><span data-slate-zero-width="z">​</span></span></span></a><span data-key="c213b3deeb81493d9994bf6260919873"><span data-offset-key="c213b3deeb81493d9994bf6260919873:0"><span data-slate-zero-width="z">​</span></span></span><a href="https://realpython.com/account/join/" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="ca2309e9024a487a951271c9aad47b2d"><span data-offset-key="ca2309e9024a487a951271c9aad47b2d:0"> Remove ads</span></span></a><span data-key="928062b52fd543b080695723f5720e85"><span data-offset-key="928062b52fd543b080695723f5720e85:0"><span data-slate-zero-width="z">​</span></span></span></span>

<span class="text-4505230f--HeadingH600-23f228db--textContentFamily-49a318e1"><span data-key="7b76254fa5bd45c08c3fd141badcab09"><span data-offset-key="7b76254fa5bd45c08c3fd141badcab09:0">Using Sequence-Like Features of </span><span data-offset-key="7b76254fa5bd45c08c3fd141badcab09:1">`deque`</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="489bfcb1c90447dfbac702e1ce316c3e"><span data-offset-key="489bfcb1c90447dfbac702e1ce316c3e:0">Since deques are mutable sequences, they implement almost all the methods and operations that are common to </span></span><a href="https://docs.python.org/3/library/stdtypes.html?highlight=built#common-sequence-operations" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="27969da18f6245ac8429da69cf8031ac"><span data-offset-key="27969da18f6245ac8429da69cf8031ac:0">sequences</span></span></a><span data-key="01554b8390e246b28f2426df6dc7a8a7"><span data-offset-key="01554b8390e246b28f2426df6dc7a8a7:0"> and </span></span><a href="https://docs.python.org/3/library/stdtypes.html#mutable-sequence-types" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="441c0caff7cc420a9ed91dcb7dbfc0f8"><span data-offset-key="441c0caff7cc420a9ed91dcb7dbfc0f8:0">mutable sequences</span></span></a><span data-key="d34787b72bcc4d06ac3b230868306ad9"><span data-offset-key="d34787b72bcc4d06ac3b230868306ad9:0">. So far, you’ve learned about some of these methods and operations, such as </span><span data-offset-key="d34787b72bcc4d06ac3b230868306ad9:1">`.insert()`</span><span data-offset-key="d34787b72bcc4d06ac3b230868306ad9:2">, indexing, membership tests, and more.</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="220e48744351402fb7d190cff2aefd42"><span data-offset-key="220e48744351402fb7d190cff2aefd42:0">Here are a few examples of other actions you can perform on </span><span data-offset-key="220e48744351402fb7d190cff2aefd42:1">`deque`</span><span data-offset-key="220e48744351402fb7d190cff2aefd42:2"> objects:&gt;&gt;&gt;</span></span></span>

    >>> from collections import deque​>>> numbers = deque([1, 2, 2, 3, 4, 4, 5])​>>> # Concatenation>>> numbers + deque([6, 7, 8])deque([1, 2, 2, 3, 4, 4, 5, 6, 7, 8])​>>> # Repetition>>> numbers * 2deque([1, 2, 2, 3, 4, 4, 5, 1, 2, 2, 3, 4, 4, 5])​>>> # Common sequence methods>>> numbers = deque([1, 2, 2, 3, 4, 4, 5])>>> numbers.index(2)1>>> numbers.count(4)2​>>> # Common mutable sequence methods>>> numbers.reverse()>>> numbersdeque([5, 4, 4, 3, 2, 2, 1])​>>> numbers.clear()>>> numbersdeque([])

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="1129c181f737456dae8995c083b4a352"><span data-offset-key="1129c181f737456dae8995c083b4a352:0">You can use the addition </span></span><a href="https://realpython.com/python-operators-expressions/" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="4613bfe5ee2f4b0c8e1897d92815d36c"><span data-offset-key="4613bfe5ee2f4b0c8e1897d92815d36c:0">operator</span></span></a><span data-key="834682b9461d48bcb698491f2f607837"><span data-offset-key="834682b9461d48bcb698491f2f607837:0"> (</span><span data-offset-key="834682b9461d48bcb698491f2f607837:1">`+`</span><span data-offset-key="834682b9461d48bcb698491f2f607837:2">) to concatenate two existing deques. On the other hand, the multiplication operator (</span><span data-offset-key="834682b9461d48bcb698491f2f607837:3">`*`</span><span data-offset-key="834682b9461d48bcb698491f2f607837:4">) returns a new deque equivalent to repeating the original deque as many times as you want.</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="9e39715dc97c462fa2af843f47c6fb5a"><span data-offset-key="9e39715dc97c462fa2af843f47c6fb5a:0">Regarding other sequence methods, the following table provides a summary:</span></span></span>

<table><colgroup><col style="width: 50%" /><col style="width: 50%" /></colgroup><tbody><tr class="odd"><td style="text-align: left;"><p><span class="text-4505230f--UIH400-4e41e82a--textContentFamily-49a318e1"><span data-key="e9a7c8cbf4764d87841f2004db33e02a"><span data-offset-key="e9a7c8cbf4764d87841f2004db33e02a:0">Method</span></span></span></p></td><td style="text-align: left;"><p><span class="text-4505230f--UIH400-4e41e82a--textContentFamily-49a318e1"><span data-key="839399582ffc4ad3b5e1582a230c2542"><span data-offset-key="839399582ffc4ad3b5e1582a230c2542:0">Description</span></span></span></p></td></tr><tr class="even"><td style="text-align: left;"><p><span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="8b8e05bf58b046dcac15133ea56bfb19"><span data-offset-key="8b8e05bf58b046dcac15133ea56bfb19:0"><span data-slate-zero-width="z">​</span></span></span><a href="https://docs.python.org/3/library/collections.html#collections.deque.clear" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="09c82a4002d7427e854b10b6457dc71a"><span data-offset-key="09c82a4002d7427e854b10b6457dc71a:0"><code class="code-0458e21e" spellcheck="false" data-slate-leaf="true">.clear()</code></span></span></a><span data-key="a8731e70cc53423a94639bf29431ab32"><span data-offset-key="a8731e70cc53423a94639bf29431ab32:0"><span data-slate-zero-width="z">​</span></span></span></span></p></td><td style="text-align: left;"><p><span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="78261957de4749bbb2301894929e4d5c"><span data-offset-key="78261957de4749bbb2301894929e4d5c:0">Remove all the elements from a deque.</span></span></span></p></td></tr><tr class="odd"><td style="text-align: left;"><p><span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="5b869550462f40c8a764f375382350d5"><span data-offset-key="5b869550462f40c8a764f375382350d5:0"><span data-slate-zero-width="z">​</span></span></span><a href="https://docs.python.org/3/library/collections.html#collections.deque.copy" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="b8f8cf9948794e5ab6572299ce114ca9"><span data-offset-key="b8f8cf9948794e5ab6572299ce114ca9:0"><code class="code-0458e21e" spellcheck="false" data-slate-leaf="true">.copy()</code></span></span></a><span data-key="ecce07f27dab475fb6e38b8850d64ee0"><span data-offset-key="ecce07f27dab475fb6e38b8850d64ee0:0"><span data-slate-zero-width="z">​</span></span></span></span></p></td><td style="text-align: left;"><p><span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="c927b15fe00544bd844ecf4a5d92878c"><span data-offset-key="c927b15fe00544bd844ecf4a5d92878c:0">Create a shallow copy of a deque.</span></span></span></p></td></tr><tr class="even"><td style="text-align: left;"><p><span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="9d62d0280b9d4fb58dd965e386d4db83"><span data-offset-key="9d62d0280b9d4fb58dd965e386d4db83:0"><span data-slate-zero-width="z">​</span></span></span><a href="https://docs.python.org/3/library/collections.html#collections.deque.count" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="9d9fed036c9746eba20ba8e67c97a940"><span data-offset-key="9d9fed036c9746eba20ba8e67c97a940:0"><code class="code-0458e21e" spellcheck="false" data-slate-leaf="true">.count(value)</code></span></span></a><span data-key="42b3fa7d8f374a489e1da94a256a584c"><span data-offset-key="42b3fa7d8f374a489e1da94a256a584c:0"><span data-slate-zero-width="z">​</span></span></span></span></p></td><td style="text-align: left;"><p><span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="dfcb65e4bc384fe6a00ec98c5bfc15b0"><span data-offset-key="dfcb65e4bc384fe6a00ec98c5bfc15b0:0">Count the number times </span><span data-offset-key="dfcb65e4bc384fe6a00ec98c5bfc15b0:1"><code class="code-0458e21e" spellcheck="false" data-slate-leaf="true">value</code></span><span data-offset-key="dfcb65e4bc384fe6a00ec98c5bfc15b0:2"> appears in a deque.</span></span></span></p></td></tr><tr class="odd"><td style="text-align: left;"><p><span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="36ad7680445c43deb415aa392826b159"><span data-offset-key="36ad7680445c43deb415aa392826b159:0"><span data-slate-zero-width="z">​</span></span></span><a href="https://docs.python.org/3/library/collections.html#collections.deque.index" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="1d251bae333a428481b22c8bf8478f0c"><span data-offset-key="1d251bae333a428481b22c8bf8478f0c:0"><code class="code-0458e21e" spellcheck="false" data-slate-leaf="true">.index(value)</code></span></span></a><span data-key="1c516cb0f9d74b82b18bc1d7d07696a0"><span data-offset-key="1c516cb0f9d74b82b18bc1d7d07696a0:0"><span data-slate-zero-width="z">​</span></span></span></span></p></td><td style="text-align: left;"><p><span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="101809d614de4b9e9b6860b112478372"><span data-offset-key="101809d614de4b9e9b6860b112478372:0">Return the position of </span><span data-offset-key="101809d614de4b9e9b6860b112478372:1"><code class="code-0458e21e" spellcheck="false" data-slate-leaf="true">value</code></span><span data-offset-key="101809d614de4b9e9b6860b112478372:2"> in the deque.</span></span></span></p></td></tr><tr class="even"><td style="text-align: left;"><p><span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="1a85d70668cd499eb90146c3675123ac"><span data-offset-key="1a85d70668cd499eb90146c3675123ac:0"><span data-slate-zero-width="z">​</span></span></span><a href="https://docs.python.org/3/library/collections.html#collections.deque.reverse" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="47f7c14925f4490ea3f8600cf76a18d8"><span data-offset-key="47f7c14925f4490ea3f8600cf76a18d8:0"><code class="code-0458e21e" spellcheck="false" data-slate-leaf="true">.reverse()</code></span></span></a><span data-key="cecd74e44b454e03b47cac1d5c153869"><span data-offset-key="cecd74e44b454e03b47cac1d5c153869:0"><span data-slate-zero-width="z">​</span></span></span></span></p></td><td style="text-align: left;"><p><span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="f282139c2c094e869d40296edad87b95"><span data-offset-key="f282139c2c094e869d40296edad87b95:0">Reverse the elements of the deque in place and then return </span><span data-offset-key="f282139c2c094e869d40296edad87b95:1"><code class="code-0458e21e" spellcheck="false" data-slate-leaf="true">None</code></span><span data-offset-key="f282139c2c094e869d40296edad87b95:2">.</span></span></span></p></td></tr></tbody></table>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="747f63c852534b4c9d8d97039e0157be"><span data-offset-key="747f63c852534b4c9d8d97039e0157be:0">Here, </span><span data-offset-key="747f63c852534b4c9d8d97039e0157be:1">`.index()`</span><span data-offset-key="747f63c852534b4c9d8d97039e0157be:2"> can also take two optional arguments: </span><span data-offset-key="747f63c852534b4c9d8d97039e0157be:3">`start`</span><span data-offset-key="747f63c852534b4c9d8d97039e0157be:4"> and </span><span data-offset-key="747f63c852534b4c9d8d97039e0157be:5">`stop`</span><span data-offset-key="747f63c852534b4c9d8d97039e0157be:6">. They allow you to restrict the search to those items at or after </span><span data-offset-key="747f63c852534b4c9d8d97039e0157be:7">`start`</span><span data-offset-key="747f63c852534b4c9d8d97039e0157be:8"> and before </span><span data-offset-key="747f63c852534b4c9d8d97039e0157be:9">`stop`</span><span data-offset-key="747f63c852534b4c9d8d97039e0157be:10">. The method raises a </span></span><a href="https://docs.python.org/3/library/exceptions.html#ValueError" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="77c9b9f082fe468a8f7979514c23294c"><span data-offset-key="77c9b9f082fe468a8f7979514c23294c:0"><code class="code-0458e21e" spellcheck="false" data-slate-leaf="true">ValueError</code></span></span></a><span data-key="f63ebc165ff244a4b08c8b24882938f3"><span data-offset-key="f63ebc165ff244a4b08c8b24882938f3:0"> if </span><span data-offset-key="f63ebc165ff244a4b08c8b24882938f3:1">`value`</span><span data-offset-key="f63ebc165ff244a4b08c8b24882938f3:2"> doesn’t appear in the deque at hand.</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="a45f60fcf3fb47be918ab337ade7062f"><span data-offset-key="a45f60fcf3fb47be918ab337ade7062f:0">Unlike lists, deques don’t include a </span><span data-offset-key="a45f60fcf3fb47be918ab337ade7062f:1">`.sort()`</span><span data-offset-key="a45f60fcf3fb47be918ab337ade7062f:2"> method to sort the sequence in place. This is because sorting a linked list would be an inefficient operation. If you ever need to sort a deque, then you can still use </span><span data-offset-key="a45f60fcf3fb47be918ab337ade7062f:3">`sorted()`</span><span data-offset-key="a45f60fcf3fb47be918ab337ade7062f:4">.</span></span></span>

<span class="text-4505230f--HeadingH600-23f228db--textContentFamily-49a318e1"><span data-key="f6f8025066584fa9a601f79a68ce116d"><span data-offset-key="f6f8025066584fa9a601f79a68ce116d:0">Putting Python’s </span><span data-offset-key="f6f8025066584fa9a601f79a68ce116d:1">`deque`</span><span data-offset-key="f6f8025066584fa9a601f79a68ce116d:2"> Into Action</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="b5d96c01035045a2ac5a801957e45a54"><span data-offset-key="b5d96c01035045a2ac5a801957e45a54:0">You can use deques in a fair amount of use cases, such as to implement queues, stacks, and </span></span><a href="https://en.wikipedia.org/wiki/Circular_buffer" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="e057d32b4d48471e8ac4566ff7ddd141"><span data-offset-key="e057d32b4d48471e8ac4566ff7ddd141:0">circular buffers</span></span></a><span data-key="165809b770044db8bef9ea2a77326507"><span data-offset-key="165809b770044db8bef9ea2a77326507:0">. You can also use them to maintain an undo-redo history, enqueue incoming requests to a </span></span><a href="https://en.wikipedia.org/wiki/Web_service" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="f2cb697de4624b22ba7419987cd6f598"><span data-offset-key="f2cb697de4624b22ba7419987cd6f598:0">web service</span></span></a><span data-key="5a6379bd82d14324bb14c59029330d39"><span data-offset-key="5a6379bd82d14324bb14c59029330d39:0">, keep a list of recently open files and websites, safely exchange data between multiple threads, and more.</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="94c22f794eab468cb9f2034387e96899"><span data-offset-key="94c22f794eab468cb9f2034387e96899:0">In the following sections, you’ll code a few small examples that will help you better understand how to use deques in your code.</span></span></span>

### 

<span class="text-4505230f--HeadingH400-686c0942--textContentFamily-49a318e1"><span data-key="2cedaf0c14b342c1928a45b9749b0494"><span data-offset-key="2cedaf0c14b342c1928a45b9749b0494:0">Keeping a Page History</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="88126e7e1c444f86a387832bcba4cb5d"><span data-offset-key="88126e7e1c444f86a387832bcba4cb5d:0">Having a </span><span data-offset-key="88126e7e1c444f86a387832bcba4cb5d:1">`maxlen`</span><span data-offset-key="88126e7e1c444f86a387832bcba4cb5d:2"> to restrict the maximum number of items makes </span><span data-offset-key="88126e7e1c444f86a387832bcba4cb5d:3">`deque`</span><span data-offset-key="88126e7e1c444f86a387832bcba4cb5d:4"> suitable for solving several problems. For example, say you’re building an application that </span></span><a href="https://realpython.com/python-web-scraping-practical-introduction/" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="49196fdac2de41efb0fbfa23272fb694"><span data-offset-key="49196fdac2de41efb0fbfa23272fb694:0">scrapes</span></span></a><span data-key="4a7cfc55a3cb4736b5c70bf7dadd5740"><span data-offset-key="4a7cfc55a3cb4736b5c70bf7dadd5740:0"> data from search engines and social media sites. At some point, you need to keep track of the three last sites your application requested data from.</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="5b07f26c3036471991d9a4252e2d4317"><span data-offset-key="5b07f26c3036471991d9a4252e2d4317:0">To solve this problem, you can use a deque with a </span><span data-offset-key="5b07f26c3036471991d9a4252e2d4317:1">`maxlen`</span><span data-offset-key="5b07f26c3036471991d9a4252e2d4317:2"> of </span><span data-offset-key="5b07f26c3036471991d9a4252e2d4317:3">`3`</span><span data-offset-key="5b07f26c3036471991d9a4252e2d4317:4">:&gt;&gt;&gt;</span></span></span>

    >>> from collections import deque​>>> sites = (...     "google.com",...     "yahoo.com",...     "bing.com"... )​>>> pages = deque(maxlen=3)>>> pages.maxlen3​>>> for site in sites:...     pages.appendleft(site)...​>>> pagesdeque(['bing.com', 'yahoo.com', 'google.com'], maxlen=3)​>>> pages.appendleft("facebook.com")>>> pagesdeque(['facebook.com', 'bing.com', 'yahoo.com'], maxlen=3)​>>> pages.appendleft("twitter.com")>>> pagesdeque(['twitter.com', 'facebook.com', 'bing.com'], maxlen=3)

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="726ea772646142ba98ed70d8f06d48d3"><span data-offset-key="726ea772646142ba98ed70d8f06d48d3:0">In this example, </span><span data-offset-key="726ea772646142ba98ed70d8f06d48d3:1">`pages`</span><span data-offset-key="726ea772646142ba98ed70d8f06d48d3:2"> keeps a list of the last three sites your application visited. Once </span><span data-offset-key="726ea772646142ba98ed70d8f06d48d3:3">`pages`</span><span data-offset-key="726ea772646142ba98ed70d8f06d48d3:4"> is full, adding a new site to an end of the deque automatically discards the site at the opposite end. This behavior keeps your list up to date with the last three sites you used.</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="e177db3ce614447da55723f17fc9d8bb"><span data-offset-key="e177db3ce614447da55723f17fc9d8bb:0">Note that you can set </span><span data-offset-key="e177db3ce614447da55723f17fc9d8bb:1">`maxlen`</span><span data-offset-key="e177db3ce614447da55723f17fc9d8bb:2"> to any positive integer representing the number of items to store in the deque at hand. For example, if you want to keep a list of ten sites, then you can set </span><span data-offset-key="e177db3ce614447da55723f17fc9d8bb:3">`maxlen`</span><span data-offset-key="e177db3ce614447da55723f17fc9d8bb:4"> to </span><span data-offset-key="e177db3ce614447da55723f17fc9d8bb:5">`10`</span><span data-offset-key="e177db3ce614447da55723f17fc9d8bb:6">.</span></span></span>

### 

<span class="text-4505230f--HeadingH400-686c0942--textContentFamily-49a318e1"><span data-key="01ef8b25de8d4341822f1a9c7b222546"><span data-offset-key="01ef8b25de8d4341822f1a9c7b222546:0">Sharing Data Between Threads</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="1f189e01df05437fae1ce36c51642fc1"><span data-offset-key="1f189e01df05437fae1ce36c51642fc1:0">Python’s </span><span data-offset-key="1f189e01df05437fae1ce36c51642fc1:1">`deque`</span><span data-offset-key="1f189e01df05437fae1ce36c51642fc1:2"> is also useful when you’re coding </span></span><a href="https://realpython.com/intro-to-python-threading/" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="c06f29ea7997427e9ff269819d24e980"><span data-offset-key="c06f29ea7997427e9ff269819d24e980:0">multithreaded</span></span></a><span data-key="cfa8c23214164c5b8185803832998e8c"><span data-offset-key="cfa8c23214164c5b8185803832998e8c:0"> applications, as described by </span></span><a href="https://twitter.com/raymondh" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="a4cb629e329740a3935d68e0876065e5"><span data-offset-key="a4cb629e329740a3935d68e0876065e5:0">Raymond Hettinger</span></span></a><span data-key="eebc3154e52f4272b3edc4c3f6dc4487"><span data-offset-key="eebc3154e52f4272b3edc4c3f6dc4487:0">, core Python developer and creator of </span><span data-offset-key="eebc3154e52f4272b3edc4c3f6dc4487:1">`deque`</span><span data-offset-key="eebc3154e52f4272b3edc4c3f6dc4487:2"> and the </span><span data-offset-key="eebc3154e52f4272b3edc4c3f6dc4487:3">`collections`</span><span data-offset-key="eebc3154e52f4272b3edc4c3f6dc4487:4"> module:</span></span></span>

> <span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="9be3daf74d364dd1bf585b66e5a3fb96"><span data-offset-key="9be3daf74d364dd1bf585b66e5a3fb96:0">The deque’s </span><span data-offset-key="9be3daf74d364dd1bf585b66e5a3fb96:1">`.append()`</span><span data-offset-key="9be3daf74d364dd1bf585b66e5a3fb96:2">, </span><span data-offset-key="9be3daf74d364dd1bf585b66e5a3fb96:3">`.appendleft()`</span><span data-offset-key="9be3daf74d364dd1bf585b66e5a3fb96:4">, </span><span data-offset-key="9be3daf74d364dd1bf585b66e5a3fb96:5">`.pop()`</span><span data-offset-key="9be3daf74d364dd1bf585b66e5a3fb96:6">, </span><span data-offset-key="9be3daf74d364dd1bf585b66e5a3fb96:7">`.popleft()`</span><span data-offset-key="9be3daf74d364dd1bf585b66e5a3fb96:8">, and </span><span data-offset-key="9be3daf74d364dd1bf585b66e5a3fb96:9">`len(d)`</span><span data-offset-key="9be3daf74d364dd1bf585b66e5a3fb96:10"> operations are thread-safe in CPython. (</span></span><a href="https://bugs.python.org/msg199368" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="52bd4d65a7fa4f1583022c129af509cf"><span data-offset-key="52bd4d65a7fa4f1583022c129af509cf:0">Source</span></span></a><span data-key="3313e78b9a9a48c2a661b88e89ea6e32"><span data-offset-key="3313e78b9a9a48c2a661b88e89ea6e32:0">)</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="3f46a172c4fe4fdb9eec4eb79a976b43"><span data-offset-key="3f46a172c4fe4fdb9eec4eb79a976b43:0">Because of that, you can safely add and remove data from both ends of a deque at the same time from separate threads without the risk of data corruption or other associated issues.</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="2aa7f8b3871749aa86dbff2151bd2a9e"><span data-offset-key="2aa7f8b3871749aa86dbff2151bd2a9e:0">To try out how </span><span data-offset-key="2aa7f8b3871749aa86dbff2151bd2a9e:1">`deque`</span><span data-offset-key="2aa7f8b3871749aa86dbff2151bd2a9e:2"> works in a multithreaded application, fire up your favorite </span></span><a href="https://realpython.com/python-ides-code-editors-guide/" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="17c34efe44204efdbe6d486e2f99596b"><span data-offset-key="17c34efe44204efdbe6d486e2f99596b:0">code editor</span></span></a><span data-key="ae7d50c02d7f444e9635de4222062c74"><span data-offset-key="ae7d50c02d7f444e9635de4222062c74:0">, create a new script called </span><span data-offset-key="ae7d50c02d7f444e9635de4222062c74:1">`threads.py`</span><span data-offset-key="ae7d50c02d7f444e9635de4222062c74:2">, and add the following code to it:</span></span></span>

    # threads.py​import loggingimport randomimport threadingimport timefrom collections import deque​logging.basicConfig(level=logging.INFO, format="%(message)s")​def wait_seconds(mins, maxs):    time.sleep(mins + random.random() * (maxs - mins))​def produce(queue, size):    while True:        if len(queue) < size:            value = random.randint(0, 9)            queue.append(value)            logging.info("Produced: %d -> %s", value, str(queue))        else:            logging.info("Queue is saturated")        wait_seconds(0.1, 0.5)​def consume(queue):    while True:        try:            value = queue.popleft()        except IndexError:            logging.info("Queue is empty")        else:            logging.info("Consumed: %d -> %s", value, str(queue))        wait_seconds(0.2, 0.7)​logging.info("Starting Threads...\n")logging.info("Press Ctrl+C to interrupt the execution\n")​shared_queue = deque()​threading.Thread(target=produce, args=(shared_queue, 10)).start()threading.Thread(target=consume, args=(shared_queue,)).start()

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="600ca9d8c27e4e629892fdeded272c13"><span data-offset-key="600ca9d8c27e4e629892fdeded272c13:0">Here, </span><span data-offset-key="600ca9d8c27e4e629892fdeded272c13:1">`produce()`</span><span data-offset-key="600ca9d8c27e4e629892fdeded272c13:2"> takes a </span><span data-offset-key="600ca9d8c27e4e629892fdeded272c13:3">`queue`</span><span data-offset-key="600ca9d8c27e4e629892fdeded272c13:4"> and a </span><span data-offset-key="600ca9d8c27e4e629892fdeded272c13:5">`size`</span><span data-offset-key="600ca9d8c27e4e629892fdeded272c13:6"> as arguments. Then it uses </span></span><a href="https://docs.python.org/3/library/random.html#random.randint" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="736a8a3628624ee6a8c6693710c8914e"><span data-offset-key="736a8a3628624ee6a8c6693710c8914e:0"><code class="code-0458e21e" spellcheck="false" data-slate-leaf="true">random.randint()</code></span></span></a><span data-key="e52643b7093e4b67b42065691563ca17"><span data-offset-key="e52643b7093e4b67b42065691563ca17:0"> in a </span></span><a href="https://realpython.com/python-while-loop/" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="ccc47986e2d84563a8c78fbbca564507"><span data-offset-key="ccc47986e2d84563a8c78fbbca564507:0"><code class="code-0458e21e" spellcheck="false" data-slate-leaf="true">while</code></span><span data-offset-key="ccc47986e2d84563a8c78fbbca564507:1"> loop</span></span></a><span data-key="75f807f4ab3842149dadd4edef9378f4"><span data-offset-key="75f807f4ab3842149dadd4edef9378f4:0"> to continuously produce </span></span><a href="https://realpython.com/python-random/" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="b429fba5c6e44115815cf59926ba3f21"><span data-offset-key="b429fba5c6e44115815cf59926ba3f21:0">random</span></span></a><span data-key="0af839a659e04e43b67c8873a5959904"><span data-offset-key="0af839a659e04e43b67c8873a5959904:0"> numbers and store them in a </span></span><a href="https://realpython.com/python-scope-legb-rule/#modules-the-global-scope" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="3bb91f2f31e8495ca31f99ca9459ab33"><span data-offset-key="3bb91f2f31e8495ca31f99ca9459ab33:0">global</span></span></a><span data-key="7dd765132c524a17bc2a4b941fe88866"><span data-offset-key="7dd765132c524a17bc2a4b941fe88866:0"> deque called </span><span data-offset-key="7dd765132c524a17bc2a4b941fe88866:1">`shared_queue`</span><span data-offset-key="7dd765132c524a17bc2a4b941fe88866:2">. Since appending items to a deque is a thread-safe operation, you don’t need to use a </span></span><a href="https://en.wikipedia.org/wiki/Lock_(computer_science)" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="b830293347e94e798399823090c83cc0"><span data-offset-key="b830293347e94e798399823090c83cc0:0">lock</span></span></a><span data-key="17691e67f17545c6b3298f3d65184757"><span data-offset-key="17691e67f17545c6b3298f3d65184757:0"> to protect the shared data from other threads.</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="a197b78022bf42b9941daa9b7b4ad499"><span data-offset-key="a197b78022bf42b9941daa9b7b4ad499:0">The helper function </span><span data-offset-key="a197b78022bf42b9941daa9b7b4ad499:1">`wait_seconds()`</span><span data-offset-key="a197b78022bf42b9941daa9b7b4ad499:2"> simulates that both </span><span data-offset-key="a197b78022bf42b9941daa9b7b4ad499:3">`produce()`</span><span data-offset-key="a197b78022bf42b9941daa9b7b4ad499:4"> and </span><span data-offset-key="a197b78022bf42b9941daa9b7b4ad499:5">`consume()`</span><span data-offset-key="a197b78022bf42b9941daa9b7b4ad499:6"> represent long-running operations. It returns a random wait-time value between a given range of seconds, </span><span data-offset-key="a197b78022bf42b9941daa9b7b4ad499:7">`mins`</span><span data-offset-key="a197b78022bf42b9941daa9b7b4ad499:8"> and </span><span data-offset-key="a197b78022bf42b9941daa9b7b4ad499:9">`maxs`</span><span data-offset-key="a197b78022bf42b9941daa9b7b4ad499:10">.</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="7e2a7b083c414e6a8429ea4e6d4f973e"><span data-offset-key="7e2a7b083c414e6a8429ea4e6d4f973e:0">In </span><span data-offset-key="7e2a7b083c414e6a8429ea4e6d4f973e:1">`consume()`</span><span data-offset-key="7e2a7b083c414e6a8429ea4e6d4f973e:2">, you call </span><span data-offset-key="7e2a7b083c414e6a8429ea4e6d4f973e:3">`.popleft()`</span><span data-offset-key="7e2a7b083c414e6a8429ea4e6d4f973e:4"> inside a loop to systematically retrieve and remove data from </span><span data-offset-key="7e2a7b083c414e6a8429ea4e6d4f973e:5">`shared_queue`</span><span data-offset-key="7e2a7b083c414e6a8429ea4e6d4f973e:6">. You wrap the call to </span><span data-offset-key="7e2a7b083c414e6a8429ea4e6d4f973e:7">`.popleft()`</span><span data-offset-key="7e2a7b083c414e6a8429ea4e6d4f973e:8"> in a </span></span><a href="https://realpython.com/python-exceptions/#the-try-and-except-block-handling-exceptions" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="fa41b00dd6b34cb092600ac4db8a7074"><span data-offset-key="fa41b00dd6b34cb092600ac4db8a7074:0"><code class="code-0458e21e" spellcheck="false" data-slate-leaf="true">try</code></span><span data-offset-key="fa41b00dd6b34cb092600ac4db8a7074:1"> … </span><span data-offset-key="fa41b00dd6b34cb092600ac4db8a7074:2"><code class="code-0458e21e" spellcheck="false" data-slate-leaf="true">except</code></span></span></a><span data-key="32064109d61b4879999bceb1ab7e79fb"><span data-offset-key="32064109d61b4879999bceb1ab7e79fb:0"> statement to handle those cases in which the shared queue is empty.</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="eace49d52d624acdbc58ffa8b579032b"><span data-offset-key="eace49d52d624acdbc58ffa8b579032b:0">Note that while you defined </span><span data-offset-key="eace49d52d624acdbc58ffa8b579032b:1">`shared_queue`</span><span data-offset-key="eace49d52d624acdbc58ffa8b579032b:2"> in the global </span></span><a href="https://realpython.com/python-namespaces-scope/" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="c2f8f65455b14d3bb86ce8d52bf06639"><span data-offset-key="c2f8f65455b14d3bb86ce8d52bf06639:0">namespace</span></span></a><span data-key="07a9881e73d5475ba8aa48542556aaeb"><span data-offset-key="07a9881e73d5475ba8aa48542556aaeb:0">, you access it through local variables inside </span><span data-offset-key="07a9881e73d5475ba8aa48542556aaeb:1">`produce()`</span><span data-offset-key="07a9881e73d5475ba8aa48542556aaeb:2"> and </span><span data-offset-key="07a9881e73d5475ba8aa48542556aaeb:3">`consume()`</span><span data-offset-key="07a9881e73d5475ba8aa48542556aaeb:4">. Accessing the global variable directly would be more problematic and definitely not a best practice.</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="1988e70386174cefaae857c00ef63d02"><span data-offset-key="1988e70386174cefaae857c00ef63d02:0">The final two lines in the script create and start separate threads to execute </span><span data-offset-key="1988e70386174cefaae857c00ef63d02:1">`produce()`</span><span data-offset-key="1988e70386174cefaae857c00ef63d02:2"> and </span><span data-offset-key="1988e70386174cefaae857c00ef63d02:3">`consume()`</span><span data-offset-key="1988e70386174cefaae857c00ef63d02:4"> concurrently. If you run the script from your command line, then you’ll get an output similar to the following:</span></span></span>

    $ python threads.pyStarting Threads...​Press Ctrl+C to interrupt the execution​Produced: 1 -> deque([1])Consumed: 1 -> deque([])Queue is emptyProduced: 3 -> deque([3])Produced: 0 -> deque([3, 0])Consumed: 3 -> deque([0])Consumed: 0 -> deque([])Produced: 1 -> deque([1])Produced: 0 -> deque([1, 0])  ...

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="9df2f0ad2ab946f0be0e684ecd503a2b"><span data-offset-key="9df2f0ad2ab946f0be0e684ecd503a2b:0">The producer thread adds numbers to the right end of the shared deque, while the consumer thread consumes numbers from the left end. To interrupt the script execution, you can press Ctrl+C on your keyboard.</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="f57f77e07b3542448e49208a058e0b1d"><span data-offset-key="f57f77e07b3542448e49208a058e0b1d:0">Finally, you can play a little bit with the time interval inside </span><span data-offset-key="f57f77e07b3542448e49208a058e0b1d:1">`produce()`</span><span data-offset-key="f57f77e07b3542448e49208a058e0b1d:2"> and </span><span data-offset-key="f57f77e07b3542448e49208a058e0b1d:3">`consume()`</span><span data-offset-key="f57f77e07b3542448e49208a058e0b1d:4">. Change the values you pass to </span><span data-offset-key="f57f77e07b3542448e49208a058e0b1d:5">`wait_seconds()`</span><span data-offset-key="f57f77e07b3542448e49208a058e0b1d:6">, and watch how the program behaves when the producer is slower than the consumer and the other way around.</span></span><a href="https://srv.realpython.net/click/66325228902/?c=62098619220&amp;p=58946116052&amp;r=89098" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="4a9949836db94f3999de7b65aa9a08aa"><span data-offset-key="4a9949836db94f3999de7b65aa9a08aa:0"><span data-slate-zero-width="z">​</span></span></span><span data-slate-void="true" data-key="12bce203d17845d7ad8d5f8f9fc34f4b"><span><span class="reset-3c756112--frameInlineVoid-73b6a96b" data-key="12bce203d17845d7ad8d5f8f9fc34f4b"><img src="https://img.realpython.net/cc86980015e727765da60f4377ac2185" class="image-67b14f24--image-54d049be" /></span></span></span><span data-key="ef2d7bb837b54418ac8207625c23a6db"><span data-offset-key="ef2d7bb837b54418ac8207625c23a6db:0"><span data-slate-zero-width="z">​</span></span></span></a><span data-key="e47dcfc8dc484eba8b02ea535a642f18"><span data-offset-key="e47dcfc8dc484eba8b02ea535a642f18:0"><span data-slate-zero-width="z">​</span></span></span><a href="https://realpython.com/account/join/" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="2553e88d58e34bc2b0994d22131744d3"><span data-offset-key="2553e88d58e34bc2b0994d22131744d3:0"> Remove ads</span></span></a><span data-key="bde4df58d2b646a1bc6507aaf12ad524"><span data-offset-key="bde4df58d2b646a1bc6507aaf12ad524:0"><span data-slate-zero-width="z">​</span></span></span></span>

### 

<span class="text-4505230f--HeadingH400-686c0942--textContentFamily-49a318e1"><span data-key="2c549450fc6841e58abc7d1abcc1bf6f"><span data-offset-key="2c549450fc6841e58abc7d1abcc1bf6f:0">Emulating the </span><span data-offset-key="2c549450fc6841e58abc7d1abcc1bf6f:1">`tail`</span><span data-offset-key="2c549450fc6841e58abc7d1abcc1bf6f:2"> Command</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="448152d90da749efacbe95763ec6e071"><span data-offset-key="448152d90da749efacbe95763ec6e071:0">The final example you’ll code here emulates the </span></span><a href="https://en.wikipedia.org/wiki/Tail_(Unix)" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="529293abad7b47dd83e23ca625aa6f99"><span data-offset-key="529293abad7b47dd83e23ca625aa6f99:0"><code class="code-0458e21e" spellcheck="false" data-slate-leaf="true">tail</code></span><span data-offset-key="529293abad7b47dd83e23ca625aa6f99:1"> command</span></span></a><span data-key="50b812bbb07c4c0d8f929b7ec2b56977"><span data-offset-key="50b812bbb07c4c0d8f929b7ec2b56977:0">, which is available on </span></span><a href="https://en.wikipedia.org/wiki/Unix" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="a3431523ddef476994c6a3f8df1004ea"><span data-offset-key="a3431523ddef476994c6a3f8df1004ea:0">Unix</span></span></a><span data-key="177196a4d3b54b5dacbe1b5e58f2a625"><span data-offset-key="177196a4d3b54b5dacbe1b5e58f2a625:0"> and </span></span><a href="https://en.wikipedia.org/wiki/Unix-like" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="30ecf15343b5497caf80ee817db51019"><span data-offset-key="30ecf15343b5497caf80ee817db51019:0">Unix-like</span></span></a><span data-key="fb738e1ee6b24fc59abac75d63695a75"><span data-offset-key="fb738e1ee6b24fc59abac75d63695a75:0"> operating systems. The command accepts a file path at the command line and prints the last ten lines of that file to the system’s standard output. You can tweak the number of lines you need </span><span data-offset-key="fb738e1ee6b24fc59abac75d63695a75:1">`tail`</span><span data-offset-key="fb738e1ee6b24fc59abac75d63695a75:2"> to print with the </span><span data-offset-key="fb738e1ee6b24fc59abac75d63695a75:3">`-n`</span><span data-offset-key="fb738e1ee6b24fc59abac75d63695a75:4">, </span><span data-offset-key="fb738e1ee6b24fc59abac75d63695a75:5">`--lines`</span><span data-offset-key="fb738e1ee6b24fc59abac75d63695a75:6"> option.</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="a47705c7e1534dcb8e24d62e79ec9b64"><span data-offset-key="a47705c7e1534dcb8e24d62e79ec9b64:0">Here’s a small Python function that emulates the core functionality of </span><span data-offset-key="a47705c7e1534dcb8e24d62e79ec9b64:1">`tail`</span><span data-offset-key="a47705c7e1534dcb8e24d62e79ec9b64:2">:&gt;&gt;&gt;</span></span></span>

    >>> from collections import deque​>>> def tail(filename, lines=10):...     try:...         with open(filename) as file:...             return deque(file, lines)...     except OSError as error:...         print(f'Opening file "{filename}" failed with error: {error}')...

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="4c02daff57e248899af8a1d9b0cfda35"><span data-offset-key="4c02daff57e248899af8a1d9b0cfda35:0">Here, you define </span><span data-offset-key="4c02daff57e248899af8a1d9b0cfda35:1">`tail()`</span><span data-offset-key="4c02daff57e248899af8a1d9b0cfda35:2">. The first argument, </span><span data-offset-key="4c02daff57e248899af8a1d9b0cfda35:3">`filename`</span><span data-offset-key="4c02daff57e248899af8a1d9b0cfda35:4">, holds the path to the target file as a </span></span><a href="https://realpython.com/python-strings/" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="b0a640a42af6460184e8ec8979f3a713"><span data-offset-key="b0a640a42af6460184e8ec8979f3a713:0">string</span></span></a><span data-key="b1e3261f40b243908a01e0fa3c873b53"><span data-offset-key="b1e3261f40b243908a01e0fa3c873b53:0">. The second argument, </span><span data-offset-key="b1e3261f40b243908a01e0fa3c873b53:1">`lines`</span><span data-offset-key="b1e3261f40b243908a01e0fa3c873b53:2">, represents the number of lines you want to retrieve from the end of the target file. Note that </span><span data-offset-key="b1e3261f40b243908a01e0fa3c873b53:3">`lines`</span><span data-offset-key="b1e3261f40b243908a01e0fa3c873b53:4"> defaults to </span><span data-offset-key="b1e3261f40b243908a01e0fa3c873b53:5">`10`</span><span data-offset-key="b1e3261f40b243908a01e0fa3c873b53:6"> to simulate the default behavior of </span><span data-offset-key="b1e3261f40b243908a01e0fa3c873b53:7">`tail`</span><span data-offset-key="b1e3261f40b243908a01e0fa3c873b53:8">.</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="5a0eb35243d44ee7b02ee1a6a45370e2"><span data-offset-key="5a0eb35243d44ee7b02ee1a6a45370e2:0">**Note:**</span><span data-offset-key="5a0eb35243d44ee7b02ee1a6a45370e2:1"> The original idea for this example comes from the Python documentation on </span><span data-offset-key="5a0eb35243d44ee7b02ee1a6a45370e2:2">`deque`</span><span data-offset-key="5a0eb35243d44ee7b02ee1a6a45370e2:3">. Check out the section on </span></span><a href="https://docs.python.org/3/library/collections.html#deque-recipes" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="4496cbe0334143d2b04ff1ad02768ac2"><span data-offset-key="4496cbe0334143d2b04ff1ad02768ac2:0"><code class="code-0458e21e" spellcheck="false" data-slate-leaf="true">deque</code></span><span data-offset-key="4496cbe0334143d2b04ff1ad02768ac2:1"> recipes</span></span></a><span data-key="b98427bdb97d41f69f5dd257eb0c6603"><span data-offset-key="b98427bdb97d41f69f5dd257eb0c6603:0"> for further examples.</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="0b81ae99c98d4ba3ac4b2b9519372acd"><span data-offset-key="0b81ae99c98d4ba3ac4b2b9519372acd:0">The deque in the highlighted line can only store up to the number of items you pass to </span><span data-offset-key="0b81ae99c98d4ba3ac4b2b9519372acd:1">`lines`</span><span data-offset-key="0b81ae99c98d4ba3ac4b2b9519372acd:2">. This guarantees that you get the desired number of lines from the end of the input file.</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="ad317cac6386497788b36f38c1f47ffa"><span data-offset-key="ad317cac6386497788b36f38c1f47ffa:0">As you saw before, when you create a bounded deque and initialize it with an iterable the contains more items than allowed (</span><span data-offset-key="ad317cac6386497788b36f38c1f47ffa:1">`maxlen`</span><span data-offset-key="ad317cac6386497788b36f38c1f47ffa:2">), the </span><span data-offset-key="ad317cac6386497788b36f38c1f47ffa:3">`deque`</span><span data-offset-key="ad317cac6386497788b36f38c1f47ffa:4"> constructor discards all the leftmost items in the input. Because of that, you end up with the last </span><span data-offset-key="ad317cac6386497788b36f38c1f47ffa:5">`maxlen`</span><span data-offset-key="ad317cac6386497788b36f38c1f47ffa:6"> lines of the target file.</span></span></span>

<span class="text-4505230f--HeadingH600-23f228db--textContentFamily-49a318e1"><span data-key="04f7aba33aa948f6bea0d80f8e20cffb"><span data-offset-key="04f7aba33aa948f6bea0d80f8e20cffb:0">Conclusion</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="bcb0b079fd4d4ec1acbf52e95348f3af"><span data-offset-key="bcb0b079fd4d4ec1acbf52e95348f3af:0"><span data-slate-zero-width="z">​</span></span></span><a href="https://realpython.com/python-data-structures/#queues-fifos" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="f13f285d853c4958bbed8d332381b233"><span data-offset-key="f13f285d853c4958bbed8d332381b233:0">Queues</span></span></a><span data-key="771409e0298d4b52af9a2ab7288ea37a"><span data-offset-key="771409e0298d4b52af9a2ab7288ea37a:0"> and </span></span><a href="https://realpython.com/how-to-implement-python-stack/" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="6a7048d3d4154634be5ccdacb24b1c1f"><span data-offset-key="6a7048d3d4154634be5ccdacb24b1c1f:0">stacks</span></span></a><span data-key="68e24e26b37d4581aacf67147cedd884"><span data-offset-key="68e24e26b37d4581aacf67147cedd884:0"> are commonly used </span><span data-offset-key="68e24e26b37d4581aacf67147cedd884:1">**abstract data types**</span><span data-offset-key="68e24e26b37d4581aacf67147cedd884:2"> in programming. They typically require efficient </span><span data-offset-key="68e24e26b37d4581aacf67147cedd884:3">**pop**</span><span data-offset-key="68e24e26b37d4581aacf67147cedd884:4"> and </span><span data-offset-key="68e24e26b37d4581aacf67147cedd884:5">**append**</span><span data-offset-key="68e24e26b37d4581aacf67147cedd884:6"> operations on either end of the underlying data structure. Python’s </span></span><a href="https://docs.python.org/3/library/collections.html#module-collections" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="d6ce948fccfa40a1a1de78e9c8bddb37"><span data-offset-key="d6ce948fccfa40a1a1de78e9c8bddb37:0"><code class="code-0458e21e" spellcheck="false" data-slate-leaf="true">collections</code></span></span></a><span data-key="a1982edf25e54a80823eeab25a515b51"><span data-offset-key="a1982edf25e54a80823eeab25a515b51:0"> module provides a data type called </span></span><a href="https://docs.python.org/3/library/collections.html#collections.deque" class="link-a079aa82--primary-53a25e66--link-faf6c434"><span data-key="40518580098e458bab4118e419ec3f47"><span data-offset-key="40518580098e458bab4118e419ec3f47:0"><code class="code-0458e21e" spellcheck="false" data-slate-leaf="true">deque</code></span></span></a><span data-key="d5ad4183c5834a97a9e2e881a60ecc23"><span data-offset-key="d5ad4183c5834a97a9e2e881a60ecc23:0"> that’s specially designed for fast and memory-efficient append and pop operations on both ends.</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="9a8d04aa5098496f9f6858b0b7f4145f"><span data-offset-key="9a8d04aa5098496f9f6858b0b7f4145f:0">With </span><span data-offset-key="9a8d04aa5098496f9f6858b0b7f4145f:1">`deque`</span><span data-offset-key="9a8d04aa5098496f9f6858b0b7f4145f:2">, you can code your own queues and stacks at a low level in an elegant, efficient, and Pythonic way.</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="1de5df4d04d04290be54d6432c7ee119"><span data-offset-key="1de5df4d04d04290be54d6432c7ee119:0">**In this tutorial, you learned how to:**</span></span></span>

-   <span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="565cb9ff641b41148286fa0ea78d341c"><span data-offset-key="565cb9ff641b41148286fa0ea78d341c:0">Create and use Python’s </span><span data-offset-key="565cb9ff641b41148286fa0ea78d341c:1">`deque`</span><span data-offset-key="565cb9ff641b41148286fa0ea78d341c:2"> in your code</span></span></span>

-   <span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="35da2b433da24412b22bd5822b3804c4"><span data-offset-key="35da2b433da24412b22bd5822b3804c4:0">Efficiently </span><span data-offset-key="35da2b433da24412b22bd5822b3804c4:1">**append**</span><span data-offset-key="35da2b433da24412b22bd5822b3804c4:2"> and </span><span data-offset-key="35da2b433da24412b22bd5822b3804c4:3">**pop**</span><span data-offset-key="35da2b433da24412b22bd5822b3804c4:4"> items from both ends of a sequence with </span><span data-offset-key="35da2b433da24412b22bd5822b3804c4:5">`deque`</span></span></span>

-   <span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="062349b0ad52491e8402adf7c50265b8"><span data-offset-key="062349b0ad52491e8402adf7c50265b8:0">Use </span><span data-offset-key="062349b0ad52491e8402adf7c50265b8:1">`deque`</span><span data-offset-key="062349b0ad52491e8402adf7c50265b8:2"> to build efficient </span><span data-offset-key="062349b0ad52491e8402adf7c50265b8:3">**queues**</span><span data-offset-key="062349b0ad52491e8402adf7c50265b8:4"> and </span><span data-offset-key="062349b0ad52491e8402adf7c50265b8:5">**stacks**</span><span data-offset-key="062349b0ad52491e8402adf7c50265b8:6"> in Python</span></span></span>

-   <span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="de2289a7df11415f8857496b4c8bbda6"><span data-offset-key="de2289a7df11415f8857496b4c8bbda6:0">Decide when to use </span><span data-offset-key="de2289a7df11415f8857496b4c8bbda6:1">`deque`</span><span data-offset-key="de2289a7df11415f8857496b4c8bbda6:2"> instead of </span><span data-offset-key="de2289a7df11415f8857496b4c8bbda6:3">`list`</span></span></span>

<span class="text-4505230f--TextH400-3033861f--textContentFamily-49a318e1"><span data-key="518ad8dbe7384e418573053db2f57741"><span data-offset-key="518ad8dbe7384e418573053db2f57741:0">In this tutorial, you also coded a few examples that helped you approach some common use cases of </span><span data-offset-key="518ad8dbe7384e418573053db2f57741:1">`deque`</span><span data-offset-key="518ad8dbe7384e418573053db2f57741:2"> in Python.</span></span></span>

<a href="dictionaries-sets-files-and-modules.html" class="reset-3c756112--card-6570f064--whiteCard-fff091a4--cardPrevious-56a5e674"></a>

<span class="text-4505230f--TextH200-a3425406--textContentFamily-49a318e1">Docs - Previous</span>

<span class="text-4505230f--UIH400-4e41e82a--textContentFamily-49a318e1">Dictionaries, sets, files, and modules</span>

<a href="values-expressions-and-statments.html" class="reset-3c756112--card-6570f064--whiteCard-fff091a4--cardNext-19241c42"></a>

<span class="text-4505230f--TextH200-a3425406--textContentFamily-49a318e1">Next - Docs</span>

<span class="text-4505230f--UIH400-4e41e82a--textContentFamily-49a318e1">Values Expressions & Statments</span>

<img src="https://avatars.githubusercontent.com/u/66654881?v=4" class="image-67b14f24--avatar-1c1d03ec" />

<span class="text-4505230f--TextH200-a3425406--textContentFamily-49a318e1">Last updated 3 days ago</span>

<a href="https://github.com/bgoonz/python-gitbook/blob/master/stdlib/queue-and-stacks.md" class="reset-3c756112--menuItem-aa02f6ec--menuItemLight-757d5235--menuItemInline-173bdf97--pageSideMenuItem-22949732"></a>

<span class="text-4505230f--UIH300-2063425d--textUIFamily-5ebd8e40">Edit on GitHub</span>

<span class="text-4505230f--UIH300-2063425d--textUIFamily-5ebd8e40">Export as PDF</span>

<span class="text-4505230f--InfoH100-1e92e1d1--textContentFamily-49a318e1">Contents</span>

<a href="queue-and-stacks.html#getting-started-with-pythons-deque" class="reset-3c756112--menuItem-aa02f6ec--menuItemLight-757d5235--menuItemInline-173bdf97--pageTocItem-f4427024"></a>

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1"><span class="text-4505230f--UIH200-50ead35f--textContentFamily-49a318e1--pageTocLinkH2-2294976c">Getting Started With Python’s deque</span></span>

<a href="queue-and-stacks.html#popping-and-appending-items-efficiently" class="reset-3c756112--menuItem-aa02f6ec--menuItemLight-757d5235--menuItemInline-173bdf97--pageTocItem-f4427024"></a>

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1"><span class="text-4505230f--UIH200-50ead35f--textContentFamily-49a318e1--pageTocLinkH2-2294976c">Popping and Appending Items Efficiently</span></span>

<a href="queue-and-stacks.html#accessing-random-items-in-a-deque" class="reset-3c756112--menuItem-aa02f6ec--menuItemLight-757d5235--menuItemInline-173bdf97--pageTocItem-f4427024"></a>

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1"><span class="text-4505230f--UIH200-50ead35f--textContentFamily-49a318e1--pageTocLinkH2-2294976c">Accessing Random Items in a deque</span></span>

<a href="queue-and-stacks.html#building-efficient-queues-with-deque" class="reset-3c756112--menuItem-aa02f6ec--menuItemLight-757d5235--menuItemInline-173bdf97--pageTocItem-f4427024"></a>

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1"><span class="text-4505230f--UIH200-50ead35f--textContentFamily-49a318e1--pageTocLinkH2-2294976c">Building Efficient Queues With deque</span></span>

<a href="queue-and-stacks.html#exploring-other-features-of-deque" class="reset-3c756112--menuItem-aa02f6ec--menuItemLight-757d5235--menuItemInline-173bdf97--pageTocItem-f4427024"></a>

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1"><span class="text-4505230f--UIH200-50ead35f--textContentFamily-49a318e1--pageTocLinkH2-2294976c">Exploring Other Features of deque</span></span>

<a href="queue-and-stacks.html#using-sequence-like-features-of-deque" class="reset-3c756112--menuItem-aa02f6ec--menuItemLight-757d5235--menuItemInline-173bdf97--pageTocItem-f4427024"></a>

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1"><span class="text-4505230f--UIH200-50ead35f--textContentFamily-49a318e1--pageTocLinkH2-2294976c">Using Sequence-Like Features of deque</span></span>

<a href="queue-and-stacks.html#putting-pythons-deque-into-action" class="reset-3c756112--menuItem-aa02f6ec--menuItemLight-757d5235--menuItemInline-173bdf97--pageTocItem-f4427024"></a>

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1"><span class="text-4505230f--UIH200-50ead35f--textContentFamily-49a318e1--pageTocLinkH2-2294976c">Putting Python’s deque Into Action</span></span>

<a href="queue-and-stacks.html#conclusion" class="reset-3c756112--menuItem-aa02f6ec--menuItemLight-757d5235--menuItemInline-173bdf97--pageTocItem-f4427024"></a>

<span class="text-4505230f--UIH300-2063425d--textContentFamily-49a318e1"><span class="text-4505230f--UIH200-50ead35f--textContentFamily-49a318e1--pageTocLinkH2-2294976c">Conclusion</span></span>
